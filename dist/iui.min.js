(function(c,b,a,e){b.IUI_UTILS={animateEnd:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",transitionEnd:"webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd",isPlaceholder:function(){var f=a.createElement("input");return"placeholder" in f},throttle:function(g,i,m){var f,k,n;var l=null;var j=0;if(!m){m={}}var h=function(){j=m.leading===false?0:new Date().getTime();l=null;n=g.apply(f,k);if(!l){f=k=null}};return function(){var o=new Date().getTime();if(!j&&m.leading===false){j=o}var p=i-(o-j);f=this;k=arguments;if(p<=0||p>i){clearTimeout(l);l=null;j=o;n=g.apply(f,k);if(!l){f=k=null}}else{if(!l&&m.trailing!==false){l=setTimeout(h,p)}}return n}},debounce:function(h,j,g){var m,l,f,k,n;var i=function(){var o=new Date().getTime()-k;if(o<j&&o>0){m=setTimeout(i,j-o)}else{m=null;if(!g){n=h.apply(f,l);if(!m){f=l=null}}}};return function(){f=this;l=arguments;k=new Date().getTime();var o=g&&!m;if(!m){m=setTimeout(i,j)}if(o){n=h.apply(f,l);f=l=null}return n}},scrollBarWidth:(function(){var g;var f=c("<div/>");f.css({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999});c("html").append(f);g=f[0].offsetWidth-f[0].clientWidth;f.remove();return g}())};b.IUI={};c.fn.IUI=function(){var f=arguments;var h=arguments[0];if(IUI[h]){h=IUI[h];f=Array.prototype.slice.call(f,1);return h.apply(this,f)}else{if(typeof(h)=="object"||!h){for(var g in h){IUI=c.extend(IUI,h);h=IUI[g];break}}else{c.error("Method "+h+" does not exist on jQuery.IUI Plugin");return this}}};var d=c({});c.extend({sub:function(){d.on.apply(d,arguments)},unsub:function(){d.off.apply(d,arguments)},pub:function(){d.trigger.apply(d,arguments)}});c.extend({alert:function(r){var g=c.extend({container:"body",obj:"#message",text:"",timeout:1000,status:true,offset:false,customClass:"alert-part",callback:null},r);var q=g.obj.charAt(0)==="#"?"id":"class";var i=c(g.obj).length===0?c("<div "+q+'="'+g.obj.slice(1)+'" />').appendTo("body"):c(g.obj);var h=g.status?"success":"error";var j=i.data("count")||1;var f=new Date().getTime();var n=i.outerWidth();var p=i.outerHeight();var m=i.offset().left;var l=i.offset().top;var o;clearTimeout(i.data("count"));if(g.offset){if(typeof i.attr("data-alert")==="undefined"){c('<div class="'+g.customClass+'" id="alert_'+f+'" style="left:'+(m+g.offset[0])+"px;top:"+(l+p+g.offset[1])+'px"></div>').appendTo(g.container);i.attr("data-alert",f)}o=c("#alert_"+i.attr("data-alert"))}var k=g.offset?o:i;k.html('<span class="'+h+'">'+g.text+"</span>").removeClass("hide");i.data("count",setTimeout(function(){k.addClass("hide");if(g.callback){g.callback()}},g.timeout))}});
/*!
     * JavaScript Cookie v2.1.2
     * https://github.com/js-cookie/js-cookie
     *
     * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
     * Released under the MIT license
     */
(function(f){function h(){var m=0;var j={};for(;m<arguments.length;m++){var k=arguments[m];for(var l in k){j[l]=k[l]}}return j}function g(j){function i(s,r,o){var v;if(typeof a==="undefined"){return}if(arguments.length>1){o=h({path:"/"},i.defaults,o);if(typeof o.expires==="number"){var m=new Date();m.setMilliseconds(m.getMilliseconds()+o.expires*86400000);o.expires=m}try{v=JSON.stringify(r);if(/^[\{\[]/.test(v)){r=v}}catch(q){}if(!j.write){r=encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)}else{r=j.write(r,s)}s=encodeURIComponent(String(s));s=s.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);s=s.replace(/[\(\)]/g,escape);return(a.cookie=[s,"=",r,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join(""))}if(!s){v={}}var u=a.cookie?a.cookie.split("; "):[];var t=/(%[0-9A-Z]{2})+/g;var p=0;for(;p<u.length;p++){var n=u[p].split("=");var l=n.slice(1).join("=");if(l.charAt(0)==='"'){l=l.slice(1,-1)}try{var k=n[0].replace(t,decodeURIComponent);l=j.read?j.read(l,k):j(l,k)||l.replace(t,decodeURIComponent);if(this.json){try{l=JSON.parse(l)}catch(q){}}if(s===k){v=l;break}if(!s){v[k]=l}}catch(q){}}return v}i.set=i;i.get=function(k){return i(k)};i.getJSON=function(){return i.apply({json:true},[].slice.call(arguments))};i.defaults={};i.remove=function(l,k){i(l,"",h(k,{expires:-1}))};i.withConverter=g;return i}f.extend({cookie:g(function(){})})}(jQuery));c.loading=c.fn.loading=function(g,h){var j={display:false,type:1,animateHtml:'<div class="ball-clip-rotate"><div></div></div>',src:"http://img.yi114.com/201571121314_382.gif",shadow:true};var f;var k=this instanceof c;if(k){f=this;f.css("position","relative")}else{f=c("body")}var i='<div class="IUI-loading">{{hook}}</div>';if(typeof g==="object"){c.extend(j,g)}else{if(g!==e){j.display=g}if(h!==e){j.type=h}}i=i.replace("{{hook}}",j.type?j.animateHtml:'<img src="'+j.src+'" />');if(j.shadow){i='<div class="IUI-loading-backdrop" '+(k?'style="position:absolute;"':"")+"></div>"+i}if(j.display){f.append(i)}else{f.find(">.IUI-loading-backdrop,>.IUI-loading").remove()}};(function(l,n){var o="3.1.0";var j=IUI_UTILS.scrollBarWidth;var h=a.all&&!n.atob;var k=l("body");var g=l('<div class="layer-backdrop"></div>');function m(q,p){if(h){p()}else{q.on(IUI_UTILS.animateEnd,p)}}function f(q,p){if(h){p()}else{q.on(IUI_UTILS.transitionEnd,p)}}function i(q,p){var r={container:"body",cache:false,shadow:true,confirmHandle:".btn-confirm",closeHandle:".btn-cancel,.btn-close",offsetWidth:"auto",offsetHeight:"auto",url:l(this).attr("data-url")||false,dataType:l(this).attr("data-dataType")||"html",data:"",method:"GET",content:"",showCall:function(){},hideCall:function(){},successCall:function(){},errorCall:function(){},confirmCall:function(){},cancelCall:function(){}};this.$selector=p;this.config=l.extend(r,q);this.$backdrop=g;this.init();this.event()}i.prototype.init=function(){var x=this;var s=x.config;var u='<div class="layer-box hide" id="{{layerName}}"><div class="layer-content">'+s.content+"</div></div>";var v=this.$selector=x.$selector.length?x.$selector:l(u.replace("{{layerName}}",x.$selector.selector.replace("#",""))).appendTo(s.container);var w=s.container==="body"?k:l(s.container);var r=s.closeHandle;var p=this.$content=v.find(".layer-content");var q=Number(v.attr("data-width"))||s.offsetWidth;var t=Number(v.attr("data-height"))||s.offsetHeight;p.css({width:q,height:t});v.data("layer",x)};i.prototype.ajaxLoad=function(){var q=this;var r=q.config;var t=q.$selector;var s=r.url||"?";var u=(t.attr("data-method")||r.method).toUpperCase();var p=r.dataType;if(r.cache&&t.data("success")){q.showLayer();return false}l.loading(true,true);t.data("success",1);l.ajax({url:s,type:u,dataType:p,data:r.data}).then(function(v){l.loading(false);r.successCall.apply(t,[v,this,q]);q.showLayer()},function(v){l.loading(false);q.hideLayer();r.errorCall.apply(t,[v,this,q])});return q};i.prototype.event=function(){var p=this;var q=p.config;var r=p.$selector;r.on("click.iui-layer",q.confirmHandle,function(s){s.preventDefault();q.confirmCall.apply(r,[s,p]);return false});r.on("click.iui-layer",function(s){if(l(s.target).is(r)){if(!q.shadow){return false}if(k.find(".layer-loading").length){return false}p.hideLayer();q.cancelCall.apply(r,[s,p])}});r.on("click.iui-layer",q.closeHandle,function(s){p.hideLayer();q.cancelCall.apply(r,[s,p]);return false})};i.prototype.showLayer=function(v){var r=this;var s=r.config;var q=r.$backdrop;var w=a.documentElement.clientHeight;var u=a.body.style.msTouchAction===e;var p=v;var t=l.Deferred();if(l("body").height()>w&(u)){l("body").css({"border-right":j+"px transparent solid",overflow:"hidden"})}r.$selector.removeClass("hide");r.$content.off(IUI_UTILS.animateEnd);if(p){r.$content.removeClass("layer-opening")}else{r.$selector.after(q);q.attr("style","opacity: 1;visibility: visible;")}r.$content.addClass("layer-opening");m(r.$content,function(x){r.$content.removeClass("layer-opening");r.$selector.trigger("layer.show",[r]);s.showCall.apply(r.$selector,[r]);t.resolve()});l(a).on("keyup.iui-layer",function(x){if(x.keyCode===27){r.$selector.trigger("click.iui-layer",s.closeHandle)}});return t};i.prototype.hideLayer=function(t){var q=this;var r=q.config;var p=t;var s=l.Deferred();q.$content.off(IUI_UTILS.animateEnd);q.$content.addClass("layer-closing");if(!p){q.$backdrop.removeAttr("style");f(q.$backdrop,function(){q.$backdrop.remove()})}m(q.$content,function(u){q.$content.removeClass("layer-closing");q.$selector.addClass("hide");q.$selector.trigger("layer.hide",[this]);r.hideCall.apply(q.$selector,[q]);s.resolve()});k.removeAttr("style");l(a).off("keyup.iui-layer");return s};i.prototype.cutTo=function(s,p){var q=l(s).data("layer");var r=(p?l(p):this.$selector).data("layer");r.hideLayer(true).done(function(){q.showLayer(true)})};i.prototype.destroy=function(){var p=this;var q=p.$selector;q.remove()};l.fn.IUI({layer:function(p){return new i(p,this)}})}(jQuery,b));(function(g){function f(j,i){var h=j;h.addClass("active "+i.animateBefore);setTimeout(function(){h.addClass(i.animateAfter)},100)}g.fn.IUI({tabs:function(h){return this.each(function(){var j={event:"click",animateBefore:"fade",animateAfter:"in",isCache:true,ajaxSetup:null};var k=g(this);var l=k.find(".tabs-item");var i=g.extend({},j,h);k.on(i.event+".iui-tabs",".tabs-item",function(n){n.preventDefault();var p=g(this);var o=p.parent();var m=g(p.attr("href"));m.trigger("tabsAjaxBefore",[i]);o.addClass("active").siblings(".active").removeClass("active");m.siblings(".tabs-content").removeClass("active "+i.animateBefore+" "+i.animateAfter);f(m,i);if(p.data("loaded")&&i.isCache){return false}if(p.data("ajax")){g.ajax(g.extend({url:p.data("ajax"),type:"GET",dataType:"html"},i.ajaxSetup)).then(function(q){p.data("loaded",true);m.trigger("tabsAjaxSuccess",[q])},function(q){console.log(q)})}f(m,i)})})}})}(jQuery));c.extend({share:function(o){var h=c.extend({title:null,summary:null,url:null,pic:c("body").find("img").eq(0).attr("src"),copybtn:"#copy-url",swbbtn:".sweibo",qzonebtn:".qzone",twbbtn:".tweibo",dbbtn:".douban",rrbtn:".renren"},o);var m=encodeURIComponent(h.title);var l=encodeURIComponent(h.summary);var i=encodeURIComponent(a.domain+h.pic);var g=encodeURIComponent(h.url+"&share=weibo");g="http://service.weibo.com/share/share.php?url="+g+"&title="+m+"&pic="+i+"&appkey=&searchPic=false";c(h.swbbtn).attr("href",g);var f=encodeURIComponent(h.url+"&share=qzone");f="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+f+"#qzone&title="+m+"&summary="+l+"&pics="+i;c(h.qzonebtn).attr("href",f);var j=encodeURIComponent(h.url+"&share=tweibo");j="http://share.v.t.qq.com/index.php?c=share&a=index&url="+j+"#tweibo&appkey=appkey&title="+l+"&pic="+i;c(h.twbbtn).attr("href",j);var n=encodeURIComponent(h.url+"&share=douban");n="http://www.douban.com/share/service?image="+i+"&href="+n+"#douban&name="+m+"&text="+l;c(h.dbbtn).attr("href",n);var k=encodeURIComponent(h.url+"&share=renren");k="http://widget.renren.com/dialog/share?resourceUrl="+k+"&srcUrl="+k+"&title="+m+"&pic="+i+"&description="+l;c(h.rrbtn).attr("href",k);c(h.copybtn).val(h.url+"&share=copy")}});c.extend({exist:function(n){var i=c.extend({obj:c("body"),parents:".form-container",type:"email",success:null},n);var l=i.obj instanceof c?i.obj:c(i.obj);var j=l.find("#"+i.type).parents(i.parents);var g=l.find('input[name="activityId"]').val();var k=l.find("#"+i.type).val();var f=c('meta[name="csrf-param"]').prop("content");var h=c('meta[name="csrf-token"]').prop("content");var m=k?"&email="+k:"";c.post("/index/init-activity",f+"="+h+"&activityId="+g+m,function(o){if(o.status){if(k){if(o.register){j.find("#"+i.type).val("");j.removeClass("none")}else{j.addClass("none")}}if(i.success){i.success(o.region)}}})}});c.extend({ajaxError:function(h){var k=this;var j=[];var m=c.extend({obj:"#message",data:null,timeout:3000,status:true},h);var i=m.obj instanceof c?m.obj:c(m.obj);var g=m.status?"success":"error";var l="";if(m.data.error.constructor!==Object){console.log("验证已经全部通过，不再执行往下方法");return false}c.each(k.find(".val-error"),function(n,r){var q=c(r).attr("name");var o=c(r).attr("data-name");var p=o?o:q;j.push(p)});if(j){c.each(j,function(n,o){c.each(m.data.error,function(p,q){if(o===p){l=q;return l}});if(l){f(l);return false}})}function f(o){var n=i.data("count")||1;clearTimeout(i.data("count"));i.html('<span class="'+g+'">'+o+"</span>").removeClass("hide none");i.data("count",setTimeout(function(){i.addClass("none")},m.timeout))}}});c.fn.IUI({ajaxForm:function(f){return this.each(function(){var i=c(this);var h={url:i.attr("action"),method:i.attr("method")||"POST",type:i.attr("data-type")||"json",data:null,ajax2:false,before:function(){},success:function(){},error:function(){},pending:function(){},always:function(){}};var g=c.extend({},h,f);i.data("deferred",g);i.on("submit",function(k){k.preventDefault();if(i.hasClass("disabled")){g.pending.call(i,g);return false}var l=g.before.call(i,k,g);var j={url:g.url,type:g.method,data:g.data||i.serialize()};if(g.ajax2){j.data=new FormData(i[0]);j.cache=false;j.contentType=false;j.processData=false}if(l===false){return false}i.addClass("disabled").prop("disabled",true);c.ajax(j).then(function(m){i.removeClass("disabled").prop("disabled",false);g.success.call(i,m,g)},function(m){i.removeClass("disabled").prop("disabled",false);g.error.call(i,m,g)}).always(function(m){g.always.call(i,m,g)})})})}});c.fn.IUI({validate:function(n){var l={isNonEmpty:function(q){var o=this.self;var p=o[0].value;if(c.trim(p).length===0){return false}},minLength:function(o){if(this.self[0].value.length<o.minLength){return false}},maxLength:function(o){if(this.self[0].value.length<o.maxLength){return false}},birthdayRange:function(r){var q=this.self[0].value;var p=r.range[0];var o=r.range[1];if(q<p||q>o){return false}},isBirthday:function(o){if(!/^[1-9]\d{3}([-|\/|\.])?((0\d)|([1-9])|(1[0-2]))\1(([0|1|2]\d)|([1-9])|3[0-1])$/.test(this.self[0].value)){return false}},isMobile:function(o){if(!/^1[3|4|5|6|7|8][0-9]\d{8}$/.test(this.self[0].value)){return false}},isEmail:function(o){if(!/(^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$)/.test(this.self[0].value)){return false}},between:function(s){var p=this.self;var r=this.self[0].value.length;var q=s.range[0];var o=s.range[1];if(r<q||r>o){return false}},onlyEn:function(o){if(!/^[A-Za-z]+$/.test(this.self[0].value)){return false}},onlyZh:function(o){if(!/^[\u4e00-\u9fa5]+$/.test(this.self[0].value)){return false}},notInt:function(o){if(/^[0-9]*$/.test(this.self[0].value)){return false}},onlyNum:function(o){if(!/^[0-9]+([.][0-9]+){0,1}$/.test(this.self[0].value)){return false}},onlyInt:function(o){if(!/^[0-9]*$/.test(this.self[0].value)){return false}},isChecked:function(p){var o=void (0);this.self.each(function(q,r){o=r.checked;return o?false:true});return o?void (0):false},isNickname:function(o){if(!/^[A-Za-z0-9_\-\u4e00-\u9fa5]{2,20}$/i.test(this.self[0].value)){return false}}};var g={globalMessage:false,errorClass:".validate-error",infoClass:".validate-info",successClass:".validate-success",collections:[],strategy:l};var f=this;function h(o){this.container="body";this.options=c.extend(true,{},g,o);this.$selector=f;this.cache={};this.errors={};this.init()}h.prototype.init=function(){var o=this;var p=["info","success","error"];if(o.options.collections.length===0){return false}o.add();c.each(o.cache,function(s,q){if(q.context.length===0){return}var t=/validate-context-(info|success|error)/.exec(q.context[0].className);var r;if(t){r=t[1];q.self.data("validateStatus",c.inArray(r,p))}})};h.prototype.mapping=function(q){var o=this.$selector.find("[data-required="+q.required+"]");var p=o.parents(q.context).eq(0);var r;if(p.length===0){r="{context:"+q.context+"} is invalid , it may prevent the triggering event";if(b.console){console.warn(r)}else{throw r}}if(this.cache[q.required]){return false}c.extend(true,this.cache,(function(){var s={};var t=s[q.required]={};t.matches={};t.self=o;t.context=p;t.infoMsg=q.infoMsg||"";t.options=q;c.extend(true,t.matches,q.matches);return s}()))};h.prototype.remove=function(v){var y=this;var z=y.options;var p=y.cache;var t,s=0,u,q,o,w,x,r;if(typeof v!=="string"){return false}t=v.split(" ");u=t.length;for(q in p){o=p[q].self;w=o.data("required");x=o[0]?o[0].type:"";r=y.$selector.find("[data-required="+w+"]");if(c.inArray(w,t)!==-1){if(c.inArray(x,["checkbox","file","radio"])!==-1){r.off("change.iui-validate")}else{r.off("focus.iui-validate blur.iui-validate")}r.data("event.iui-validate",false);delete p[q]}}y.bindEvent()};h.prototype.add=function(p){var o=this;var r=p||o.options.collections;for(var q=0;q<r.length;q++){var s=o.$selector.find('[data-required="'+r[q].required+'"]');var t='iui-validate:cannot find element by data-required="'+r[q].required+'"';if(s.length){o.mapping(r[q])}else{if(b.console){console.warn(t)}else{throw t}}}if(p){c.merge(o.options.collections,p)}o.bindEvent()};h.prototype.bindEvent=function(){var o=this;var p=m.call(this);var r=o.$selector;var q=["select-one","select-multiple","radio","checkbox","file"];c.each(p,function(t,w){var s=r.find(w);var u,v;if(s[0]===void 0){return}u=s[0].type;v=w.replace("[","").replace("]","").split("=")[1];if(s.data("event.iui-validate")){return}if(c.inArray(u,q)!==-1){s.on("change.iui-validate",{self:o},k);s.data("event.iui-validate",true);return}s.on("focus.iui-validate",{self:o},j);if(o.cache[v].options.unblur!==true){s.on("blur.iui-validate",{self:o},i)}s.data("event.iui-validate",true)})};h.prototype.verify=function(t,p){var s=c(this);var q=t.cache[s.data("required")];var r=q.matches;var o=false;c.each(r,function(v,w){var u=t.options.strategy[v].call(q,w);o=u===void (0)?1:2;s.data("validateStatus",u);t.message(o,q,v);return o===2?false:true});s.trigger("validate."+p,q);return o};h.prototype.message=function(s,o,v){var u,t,r,p,q,w=this.errors;if(s===0){u=this.options.infoClass;r=o.infoMsg}else{if(s===1){u=this.options.successClass;r=""}else{if(s===2){u=this.options.errorClass;r=o.matches[v].errMsg}else{}}}if(s===2){w[o.options.required]=r}if(!this.options.errorClass){return false}t=["info","success","error"];q=this.options.globalMessage?c(this.options.globalMessage):o.context;u=u.replace(/\./g," ").slice(1);q.removeClass("validate-context-info validate-context-success validate-context-error").addClass("validate-context-"+t[s]).find(".validate-message").remove();p=c('<div class="validate-message '+u+'" >'+r+"</div>");q.append(p)};h.prototype.batch=function(q){var p=this;var o=[];c.each(this.cache,function(t,u){if(u.self[0].disabled){return}var s=u.self.data("validateStatus");var r=!s?p.verify.call(u.self,p,"batch"):s;if(q&&r===2){o.push(r);return false}o.push(r)});return c.inArray(2,o)===-1?true:false};function m(){var o=[];var q=this.cache;for(var p in q){o.push("[data-required="+p+"]")}return o}function j(r){var p=r.data.self;var s=c(this);var o=s.data("required");var q=p.cache[o];if(p.options.infoClass){p.message(0,q)}s.trigger("validate.focus",q)}function i(p){var r=c(this);var o=p.data.self;var q=r.data("required");o.verify.call(this,o,"blur")}function k(p){var o=p.data.self;o.verify.call(this,o,"change")}return new h(n)}});c.fn.IUI({emailSuffix:function(f){return this.each(function(){var j={container:"body",style:"global",item:"email-item",current:"checked",emails:["163.com","126.com","qq.com","gmail.com","sina.com","139.com","189.com","sohu.com"],delay:300,offsetLeft:c(this).offset().left,offsetTop:c(this).offset().top,offsetWidth:c(this).outerWidth(),offsetHeight:c(this).outerHeight(),checkedCall:function(){}};var o=c(this);var h=c.extend({},j,f);var l=c('<ul class="email-list hide"></ul>');var k=c(h.container);var i=null;var m=function(p,q){var v="";var u=q.value||null;var s=u?u.split("@")[0]:false;var t=u?u.split("@")[1]:false;for(var r=0;r<p.length;r++){email=p[r];if((s&&!t)||t&&email.indexOf(t)!==-1){v+='<li class="'+h.item+'" data-value="'+s+"@"+email+'">'+s+"@"+email+"</li>"}}return v};var n=function(w,v,u){var s=[38,40];if(c.inArray(w,s)===-1||v.hasClass("hide")){return false}var t=c.inArray(w,s)>=1?true:false;var q=v;var p=q.find("li").length;var r=q.find("li.checked");q.find("li").removeClass("checked");if(t){if(r.length&&r.index()!==p-1){r.next().addClass("checked")}else{q.find("li").eq(0).addClass("checked")}}else{if(r.index()>0){r.prev().addClass("checked")}else{q.find("li").eq(p-1).addClass("checked")}}u.val(c.trim(q.find("li.checked").text()));h.checkedCall.apply(o,[event,h])};var g=function(){var r=h.offsetLeft;var q=h.offsetTop;var p=h.offsetWidth;l.css({left:r,top:q+h.offsetHeight,width:p})};g();if(h.style==="global"){k.append(l);c(b).on("resize.emailSuffix",g)}else{o.parent().append(l)}o.on("keyup.emailSuffix",function(p){var r=this.value;if(r.charAt(0)!=="@"&&r.split("@").length===2&&c.inArray(p.keyCode,[40,38,13])===-1){var q=m(h.emails,this);l.html(q).removeClass("hide").find("li").eq(0).addClass("checked")}else{if(c.inArray(p.keyCode,[40,38,13])===-1){l.html("").addClass("hide")}}});o.on("keydown.emailSuffix",function(q){var p=l.find("li.checked");n(q.keyCode,l,o);if(q.keyCode===13){q.preventDefault();if(p.length){o.val(c.trim(p.text()))}l.addClass("hide")}});o.on("blur.emailSuffix",function(p){i=setTimeout(function(){l.addClass("hide")},h.delay)});l.on("click","."+h.item,function(p){p.preventDefault();clearTimeout(i);o.val(c(this).attr("data-value")).focus();l.addClass("hide");h.checkedCall.apply(o,[p,h]);return false})})}});c.fn.IUI({placeholder:function(f){if("placeholder" in a.createElement("input")){return}var h={color:"#999",zIndex:1,top:0,left:0},i=c.extend({},h,f||{}),g=c(this).find('input[type="text"],input[type="password"],input[type="tel"],input[type="email"]');return g.each(function(k,p){var o=c(p),l=p,m=o.attr("placeholder");var j=c("<label></label>").css({position:"absolute",top:i.top,left:i.left,color:i.color,zIndex:i.zIndex,height:0,lineHeight:o.css("height"),fontSize:o.css("fontSize"),paddingLeft:o.css("textIndent")?o.css("textIndent"):o.css("paddingLeft"),background:"none",cursor:"text"}).text(m).insertBefore(o);o.parent().css({position:"relative"});if(o.val()){j.hide()}j.on({click:function(){j.hide();o.focus()}});o.on({focus:function(){j.hide()},blur:function(){if(!o.val()){j.show()}},input:function(){if(o.val()){j.hide()}else{j.show()}}});l.onpropertychange=function(n){n=n||b.event;if(n.propertyName==="value"){var q=c(this);if(q.val()){c(this).prev("label").hide()}else{c(this).prev("label").show()}}}})}});c.fn.IUI({typeCount:function(f){return this.each(function(){c(this).on("keyup","input[type=text],textarea",function(j){j.preventDefault();var k=c(this);var g=k.parent().find("span.count");var h=parseInt(g.text().split("/")[1]);var i=this.value.length;if(i>h){g.addClass("error")}else{g.removeClass("error")}g.html(i+"/"+h)});c(this).find("input,textarea").trigger("keyup")})}});(function(i){var h={readOnly:false,contain:".tokenize",remove:"",maxLength:20,overLimitCount:function(){},existToken:function(){},searchCallback:function(){},choiceCallback:function(){},removeCallback:function(){}};var f={top:38,right:39,bottom:40,left:37,enter:13,back:9};var k={spanTemplate:['<span class="token-item">','<span>{text}</span><span data-value="{value}" class="token-close">x</span>',"</span>"].join(""),optionTemplate:'<option selected="selected" value="{value}">{value}</option>',liTemplate:'<li class="hidden" data-value="{value}">{value}</li>',inputTemplate:'<div class="token"> <span> <input type="text" maxlength="{{maxlength}}" style="width: {{width}}px"> </span> </div>'};var g=function(l,n){if(!i(this).hasClass("tokenize-level")){var m=i(this);m.parents(n.contain).find("li").removeClass("current");m.addClass("current")}};var j=i.fn.tokenize=function(l){var m=i.extend({},h,l);k.inputTemplate=k.inputTemplate.replace("{{maxlength}}",m.maxLength).replace("{{width}}",m.maxLength*12);return this.each(function(n,o){var q=i(this);var p=q.attr("data-limitCount")*1;if(typeof p!=="number"||isNaN(p)){p=Infinity}q.data({showAll:q.attr("data-showAll")==="false"?false:true,create:q.attr("data-create")==="false"?false:true,limitCount:p});q.append(k.inputTemplate);j.renderSelect(q);j.setEvent(q,m);q.find("li[uled]").each(function(r,s){i(s).addClass("current "+m.remove).trigger("click")});q.find(".tokenize-level").removeClass("hide")})};j.renderSelect=function(l){var m=l.find("select").prop("outerHTML");m=(m+"").replace(/<optgroup\s+label="(.*)".*>/g,'<li class="tokenize-level">$1<ul class="tokenize-menu">');m=m.replace(/<\/optgroup>/g,"</ul></li>");m=m.replace(/select/g,"ul").replace(/option/g,"li").replace(/value/g,"data-value");l.append(m)};j.createToken=function(q,m,o){var n=i(this).parents(o.contain).find("input").val("");var l=n.parent();var p=k.spanTemplate.replace("{text}",q).replace("{value}",m);i(p).insertBefore(l)};j.setEvent=function(l,m){if(m.readOnly===false){l.on("click",".token-close",function(o){o.stopPropagation();var q=i(this);var n=q.parents(m.contain);var p=q.attr("data-value");var r=n.find('li[data-value="'+p+'"]');if(r.hasClass("no-remove")){return}n.find('option[value="'+p+'"]').removeAttr("selected");r.removeClass("hidden");r.parents("li").eq(0).removeClass("hide");q.parent(".token-item").remove();j.hideToken(n);m.removeCallback.call(n)});l.on("click",".token",function(n){n.stopPropagation();var o=i(this);o.find("input").focus();j.searchToken.call(o.find("input")[0],m)});l.on("keyup","input",function(p){var n=p.keyCode;var o=f;if(n!==o.enter&&n!==o.back&&n!==o.bottom&&n!==o.top){j.searchToken.call(this,m)}});l.on("keyup",">ul,input",function(p){var n=p.keyCode;var o=f;if(n===o.enter||n===o.back){j.setToken.call(this,m)}});l.on("keyup",function(p){var n=p.keyCode;var o=f;if(n===o.bottom||n===o.top){l.off("mouseenter.tokenize");j.turnToken.call(this,n);l.one("mousemove",">ul",function(q){l.on("mouseenter.tokenize","li",function(r){g.call(this,r,m)})})}});l.on("mouseenter.tokenize","li",function(n){g.call(this,n,m)})}else{l.find("input").attr("readonly","readonly")}l.on("click","li",function(n){if(!i(this).hasClass("tokenize-level")){j.setToken.call(this,m)}else{n.stopPropagation()}})};j.searchToken=function(q){var n=i(this).parents(q.contain);var o=n.find(">ul").removeClass("hide").find("li").not(".tokenize-level").removeClass("current").not(".hidden");var m=n.data("showAll");var l=i.trim(this.value);var p=0;o.each(function(s,u){var t=i(u);var r=t.text();var v=p!==0?"":"current";if((m||l!=="")&&r.indexOf(l)>-1){++p;t.removeClass("hide").addClass(v)}else{t.addClass("hide")}});q.searchCallback.call(n);j.hideTitle.call(n)};j.setToken=function(o){var l=i(this).parents(o.contain);var m=l.find("li").not(".tokenize-level");var r=m.filter(".current");var s;var q;var n=l.find(".token input");var t=i.trim(n.val());if(!j.testCount.call(this,o)){o.overLimitCount(l);return}if(!j.testExist.call(this,o)){o.existToken(l);return}if(r.length){r.removeClass("current").addClass("hidden");j.createToken.call(this,r.text(),r.attr("data-value"),o);q=m.index(r);l.find("option").eq(q).attr("selected","selected")}else{var p=l.find("ul");if(l.data("create")&&p.length===1&&t){l.find("ul").append(k.liTemplate.replace(/\{value\}/g,t));j.createToken.call(this,t,t,o);l.find("select").append(k.optionTemplate.replace(/\{value\}/g,t))}}j.hideToken(l);o.choiceCallback.call(l)};j.turnToken=function(q){var r=i(this);var n=r.find(">ul");var m=r.find("li").not(".tokenize-level");var t=m.height();var s=m.filter(":visible");var p=s.filter(".current");var o=s.index(p);var l=s.length;if(l){if(q===40){o=(o+1)%l}else{if(o!==0){o=--o}else{o=--l}}p.removeClass("current");s.eq(o).addClass("current");n.scrollTop(o*t)}};j.hideToken=function(l){i(a).click(function(m){j.hideToken(i(".tokenize"))});return function(m){m.find(">ul").addClass("hide");m.find("li").not(".tokenize-level").addClass("hide")}}();j.hideTitle=function(){var l=this.find(".tokenize-level");l.each(function(m,o){var n=i(o);if(n.find("li:not(.hidden):not(.hide)").length>0){n.removeClass("hide")}else{n.addClass("hide")}})};j.testCount=function(o){var l=i(this).parents(o.contain);var n=l.data("limitCount");var m=l.find(".token-item").length;if(n!==Infinity){if(m>=n){return false}}return true};j.testExist=function(o){var n=i(this).parents(o.contain);var p=i.trim(n.find(".token input").val());var m=n.find(".token-item");var l=true;m.each(function(r,s){var q=i(s).find("span").eq(0);if(q.text()===p){l=false;return}});return l};i.fn.IUI({tokenize:j})})(jQuery);c.extend({dialog:function(s){var j=IUI_UTILS.scrollBarWidth;var l=c("body");var p=a.all&&!b.atob?0:200;var i=a.all&&!b.atob;function o(u,t){if(i){t()}else{u.on(IUI_UTILS.animateEnd,t)}}function g(u,t){if(i){t()}else{u.on(IUI_UTILS.transitionEnd,t)}}var k={title:"",content:"",confirmText:"确定",cancelText:"取消",closeBtn:false,shadow:true,type:"confirm",status:"default",keyboard:true,before:function(){},confirm:function(){},cancel:function(){}};var h=c.extend({},k,s);var f=m();var r={showDialog:function(){q(f)},hideDialog:function(){n(f)},target:f};if(!c.dialogBackdrop){c.dialogBackdrop=c('<div class="IUI-dialog-backdrop"></div>');l.append(c.dialogBackdrop)}if(h.shadow){l.on("touchstart.iui-dialog click.iui-dialog",".IUI-dialog-container",function(t){t.preventDefault();n(f)})}l.on("touchstart.iui-dialog click.iui-dialog",".IUI-dialog-main",function(t){t.stopPropagation()});f.on("touchstart.iui-dialog click.iui-dialog",".IUI-dialog-confirm",function(t){if(h.type==="dialog"){if(h.cancel.call(this,r)===false){return false}n(f);return false}if(h.confirm.call(this,r)===false){return false}});f.on("touchstart.iui-dialog click.iui-dialog",".IUI-dialog-cancel,.IUI-dialog-close",function(t){if(h.cancel.call(this,r)===false){return false}n(f)});if(h.keyboard){c(a).off("keyup.iui-dialog").on("keyup.iui-dialog",function(t){if(t.keyCode===27){f.find(".IUI-dialog-cancel,.IUI-dialog-close").trigger("click.iui-dialog")}if(t.keyCode===13){f.find(".IUI-dialog-confirm").trigger("click.iui-dialog")}})}function q(u){var v=a.documentElement.clientHeight;var t=a.body.style.msTouchAction===e;u.find(".IUI-dialog-main").off(IUI_UTILS.animateEnd);c.dialogBackdrop.off(IUI_UTILS.transitionEnd);if(c("body").height()>v&t){l.css({"border-right":j+"px transparent solid",overflow:"hidden"})}u.removeClass("hide");c.dialogBackdrop.attr("style","opacity: 1;visibility: visible;");u.find(".IUI-dialog-main").addClass("dialog-opening");o(u.find(".IUI-dialog-main"),function(w){u.find(".IUI-dialog-main").removeClass("dialog-opening")})}function n(t){c([l,t]).off("touchstart.iui-dialog click.iui-dialog");t.addClass("dialog-closing");c.dialogBackdrop.removeAttr("style");g(c.dialogBackdrop,function(u){t.remove();l.removeAttr("style")})}function m(){var w=h.type==="confirm";var z='<span class="IUI-dialog-close"></span>';var v='<a href="javascript:;" class="IUI-dialog-confirm">'+h.confirmText+"</a>";var y='<a href="javascript:;" class="IUI-dialog-cancel">'+h.cancelText+"</a>";var B='<div class="IUI-dialog-header">'+(h.title||"")+(h.closeBtn?z:"")+"</div>";var x='<div class="IUI-dialog-content">'+(h.content||"")+"</div>";var u='<div class="IUI-dialog-footer">'+v+(w?y:"")+"</div>";var t=B+x+u;var A=c('<div class="IUI-dialog-container hide"><div class="IUI-dialog-main '+h.status+'">'+t+"</div></div>");l[0].appendChild(A[0]);return A}if(h.before.call(this,r)===false){return false}q(f)}});(function(){var g='<div class="IUI-popover-container hide"><div role="content"></div><div role="operate"><a href="javascript:;" role="confirm" class="btn btn-primary">确定</a><a href="javascript:;" class="btn btn-default" role="cancel">取消</a></div></div>';var h={handle:"[data-popover]",container:"body",offsetX:0,offsetY:10,compiler:null,data:{}};function f(i){this.$selector=c(i.handle);this.$template=c(g);this.$container=c(i.container);this.config=i;this.containerPos=c(i.container)[0].getBoundingClientRect();this.init()}f.prototype.init=function(){var i=this;this.$container.on("click.IUI-popover",this.config.handle,function(j){var k=c(this);var l=k.data("popoverid")?(".popover-"+k.data("popoverid")):".popover";k.trigger("show"+l,[i]);i.show(k);k.trigger("after"+l,[i]);j.stopPropagation()});this.$container.on("click.IUI-popover",function(j){var k=c(this);k.trigger("hide.popover",[i]);i.hide()});this.$container.on("click",".IUI-popover-container",function(j){j.stopPropagation()});this.$container.on("click",'.IUI-popover-container [role="cancel"]',function(j){var k=c(this);var m=i.$template.data("caller").data("popoverid");var l=m?(".popover-"+m):".popover";i.hide();k.trigger("cancel"+l,[i])});this.$container.on("click",'.IUI-popover-container [role="confirm"]',function(j){j.preventDefault();var k=c(this);var m=i.$template.data("caller").data("popoverid");var l=m?(".popover-"+m):".popover";k.trigger("confirm"+l,[i])})};f.prototype.show=function(r){var p=this.config;var n=r;var v=r[0].getBoundingClientRect();var x=v.left;var w=v.top;var o=this.containerPos.left;var l=this.containerPos.top;var u=n.outerWidth()/2;var t=n.outerHeight();var q=this.$template;var k=c(n.attr("data-popover"));var s=p.compiler?p.compiler(n.attr("data-popover").replace(/\#|\./,""),p.data):k.html();var j=c(a).width();var m=c(a).height();var i="";this.$container.css({position:"relative"});q.find('[role="content"]').html(s);q.appendTo(p.container).removeClass("hide");x-=q.outerWidth()/2-u+p.offsetX;w-=l-t-this.$container.scrollTop()-p.offsetY;if(j-v.left<q.outerWidth()/2){x=v.left-(q.outerWidth()-u*2);i="right"}else{if(v.left===0){x=v.left;i="left"}}q.removeClass("left right").addClass(i).css({left:x,top:w}).data("caller",n).data("popover",this)};f.prototype.hide=function(){this.$container.removeAttr("style");this.$template.remove()};c.extend({popover:function(i){return new f(c.extend({},h,i))}})}())}(jQuery,window,document,undefined));