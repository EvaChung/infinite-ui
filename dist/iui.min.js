(function(d,c,a,f){c.IUI_UTILS={animateEnd:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",transitionEnd:"webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd",isPlaceholder:function(){var g=a.createElement("input");return"placeholder" in g},throttle:function(h,j,n){var g,l,o;var m=null;var k=0;if(!n){n={}}var i=function(){k=n.leading===false?0:new Date().getTime();m=null;o=h.apply(g,l);if(!m){g=l=null}};return function(){var p=new Date().getTime();if(!k&&n.leading===false){k=p}var q=j-(p-k);g=this;l=arguments;if(q<=0||q>j){clearTimeout(m);m=null;k=p;o=h.apply(g,l);if(!m){g=l=null}}else{if(!m&&n.trailing!==false){m=setTimeout(i,q)}}return o}},debounce:function(i,k,h){var n,m,g,l,o;var j=function(){var p=new Date().getTime()-l;if(p<k&&p>0){n=setTimeout(j,k-p)}else{n=null;if(!h){o=i.apply(g,m);if(!n){g=m=null}}}};return function(){g=this;m=arguments;l=new Date().getTime();var p=h&&!n;if(!n){n=setTimeout(j,k)}if(p){o=i.apply(g,m);g=m=null}return o}},scrollBarWidth:(function(){var h;var g=d("<div/>");g.css({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999});d("html").append(g);h=g[0].offsetWidth-g[0].clientWidth;g.remove();return h}())};c.IUI={};d.fn.IUI=function(){var g=arguments;var i=arguments[0];if(IUI[i]){i=IUI[i];g=Array.prototype.slice.call(g,1);return i.apply(this,g)}else{if(typeof(i)=="object"||!i){for(var h in i){IUI=d.extend(IUI,i);i=IUI[h];break}}else{d.error("Method "+i+" does not exist on jQuery.IUI Plugin");return this}}};var e=d({});d.extend({sub:function(){e.on.apply(e,arguments)},unsub:function(){e.off.apply(e,arguments)},pub:function(){e.trigger.apply(e,arguments)}});d.extend({alert:function(t){var k=IUI_UTILS.scrollBarWidth;var m=d("body");var q=a.all&&!c.atob?0:200;var j=a.all&&!c.atob;function p(v,u){if(j){u()}else{v.on(IUI_UTILS.animateEnd,u)}}function h(v,u){if(j){u()}else{v.on(IUI_UTILS.transitionEnd,u)}}var l={title:"",content:"",confirmText:"确定",cancelText:"取消",closeBtn:false,shadow:true,type:"confirm",status:"default",keyboard:true,before:function(){},confirm:function(){},cancel:function(){}};var i=d.extend({},l,t);var g=n();var s={showAlert:function(){r(g)},hideAlert:function(){o(g)},target:g};if(!d.alertBackdrop){d.alertBackdrop=d('<div class="IUI-alert-backdrop"></div>');m.append(d.alertBackdrop)}if(i.shadow){m.on("touchstart.iui-alert click.iui-alert",".IUI-alert-container",function(u){u.preventDefault();o(g)})}m.on("touchstart.iui-alert click.iui-alert",".IUI-alert-main",function(u){u.stopPropagation()});g.on("touchstart.iui-alert click.iui-alert",".IUI-alert-confirm",function(u){if(i.type==="alert"){if(i.cancel.call(this,s)===false){return false}o(g);return false}if(i.confirm.call(this,s)===false){return false}});g.on("touchstart.iui-alert click.iui-alert",".IUI-alert-cancel,.IUI-alert-close",function(u){if(i.cancel.call(this,s)===false){return false}o(g)});if(i.keyboard){d(a).off("keyup.iui-alert").on("keyup.iui-alert",function(u){if(u.keyCode===27){g.find(".IUI-alert-cancel,.IUI-alert-close").trigger("click.iui-alert")}if(u.keyCode===13){g.find(".IUI-alert-confirm").trigger("click.iui-alert")}})}function r(v){var w=a.documentElement.clientHeight;var u=a.body.style.msTouchAction===f;v.find(".IUI-alert-main").off(IUI_UTILS.animateEnd);d.alertBackdrop.off(IUI_UTILS.transitionEnd);if(d("body").height()>w&u){m.css({"border-right":k+"px transparent solid",overflow:"hidden"})}v.removeClass("hide");d.alertBackdrop.attr("style","opacity: 1;visibility: visible;");v.find(".IUI-alert-main").addClass("alert-opening");p(v.find(".IUI-alert-main"),function(x){v.find(".IUI-alert-main").removeClass("alert-opening")})}function o(u){d([m,u]).off("touchstart.iui-alert click.iui-alert");u.addClass("alert-closing");d.alertBackdrop.removeAttr("style");h(d.alertBackdrop,function(v){u.remove();m.removeAttr("style")})}function n(){var x=i.type==="confirm";var A='<span class="IUI-alert-close"></span>';var w='<a href="javascript:;" class="IUI-alert-confirm">'+i.confirmText+"</a>";var z='<a href="javascript:;" class="IUI-alert-cancel">'+i.cancelText+"</a>";var C='<div class="IUI-alert-header">'+(i.title||"")+(i.closeBtn?A:"")+"</div>";var y='<div class="IUI-alert-content">'+(i.content||"")+"</div>";var v='<div class="IUI-alert-footer">'+w+(x?z:"")+"</div>";var u=C+y+v;var B=d('<div class="IUI-alert-container hide"><div class="IUI-alert-main '+i.status+'">'+u+"</div></div>");m[0].appendChild(B[0]);return B}if(i.before.call(this,s)===false){return false}r(g)}});
/*!
     * JavaScript Cookie v2.1.2
     * https://github.com/js-cookie/js-cookie
     *
     * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
     * Released under the MIT license
     */
(function(g){function i(){var m=0;var j={};for(;m<arguments.length;m++){var k=arguments[m];for(var l in k){j[l]=k[l]}}return j}function h(k){function j(t,s,p){var w;if(typeof a==="undefined"){return}if(arguments.length>1){p=i({path:"/"},j.defaults,p);if(typeof p.expires==="number"){var n=new Date();n.setMilliseconds(n.getMilliseconds()+p.expires*86400000);p.expires=n}try{w=JSON.stringify(s);if(/^[\{\[]/.test(w)){s=w}}catch(r){}if(!k.write){s=encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)}else{s=k.write(s,t)}t=encodeURIComponent(String(t));t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);t=t.replace(/[\(\)]/g,escape);return(a.cookie=[t,"=",s,p.expires&&"; expires="+p.expires.toUTCString(),p.path&&"; path="+p.path,p.domain&&"; domain="+p.domain,p.secure?"; secure":""].join(""))}if(!t){w={}}var v=a.cookie?a.cookie.split("; "):[];var u=/(%[0-9A-Z]{2})+/g;var q=0;for(;q<v.length;q++){var o=v[q].split("=");var m=o.slice(1).join("=");if(m.charAt(0)==='"'){m=m.slice(1,-1)}try{var l=o[0].replace(u,decodeURIComponent);m=k.read?k.read(m,l):k(m,l)||m.replace(u,decodeURIComponent);if(this.json){try{m=JSON.parse(m)}catch(r){}}if(t===l){w=m;break}if(!t){w[l]=m}}catch(r){}}return w}j.set=j;j.get=function(l){return j(l)};j.getJSON=function(){return j.apply({json:true},[].slice.call(arguments))};j.defaults={};j.remove=function(m,l){j(m,"",i(l,{expires:-1}))};j.withConverter=h;return j}g.extend({cookie:h(function(){})})}(jQuery));d.loading=d.fn.loading=function(h,i){var k={display:false,type:"css",animateHtml:'<div class="ball-clip-rotate"><div></div></div>',src:"http://img.yi114.com/201571121314_382.gif",shadow:true};var g=this instanceof d?this:d("body");var j='<div class="IUI-loading">';if(typeof h==="object"){d.extend(k,h)}else{if(h!==f){k.display=h}if(i!==f){k.type=i}}if(k.type==="css"){j+="{{animateHtml}}</div>".replace("{{animateHtml}}",k.animateHtml)}else{j+='<img src="{{src}}" ></div>'.replace("{{src}}",k.src)}if(k.display){if(k.shadow){j='<div class="IUI-loading-backdrop"></div>'+j}g.append(j)}else{g.find(">.IUI-loading-backdrop,>.IUI-loading").remove()}};d.extend({tip:function(s){var h=d.extend({container:"body",obj:"#message",text:"",timeout:1000,status:true,offset:false,customClass:"tip-part",callback:null},s);var r=h.obj.charAt(0)==="#"?"id":"class";var j=d(h.obj).length===0?d("<div "+r+'="'+h.obj.slice(1)+'" />').appendTo("body"):d(h.obj);var i=h.status?"success":"error";var k=j.data("count")||1;var g=new Date().getTime();var o=j.outerWidth();var q=j.outerHeight();var n=j.offset().left;var m=j.offset().top;var p;clearTimeout(j.data("count"));if(h.offset){if(typeof j.attr("data-tip")==="undefined"){d('<div class="'+h.customClass+'" id="tip_'+g+'" style="left:'+(n+h.offset[0])+"px;top:"+(m+q+h.offset[1])+'px"></div>').appendTo(h.container);j.attr("data-tip",g)}p=d("#tip_"+j.attr("data-tip"))}var l=h.offset?p:j;l.html('<span class="'+i+'">'+h.text+"</span>").removeClass("hide");j.data("count",setTimeout(function(){l.addClass("hide");if(h.callback){h.callback()}},h.timeout))}});(function(m,o){var p="3.1.0";var k=IUI_UTILS.scrollBarWidth;var i=a.all&&!o.atob;var l=m("body");var h=m('<div class="layer-backdrop"></div>');function n(r,q){if(i){q()}else{r.on(IUI_UTILS.animateEnd,q)}}function g(r,q){if(i){q()}else{r.on(IUI_UTILS.transitionEnd,q)}}function j(r,q){var s={container:"body",cache:false,shadow:true,confirmHandle:".btn-confirm",closeHandle:".btn-cancel,.btn-close",offsetWidth:"auto",offsetHeight:"auto",url:m(this).attr("data-url")||false,dataType:m(this).attr("data-dataType")||"html",data:"",method:"GET",content:"",showCall:function(){},hideCall:function(){},successCall:function(){},errorCall:function(){},confirmCall:function(){},cancelCall:function(){}};this.$selector=q;this.config=m.extend(s,r);this.$backdrop=h;this.init();this.event()}j.prototype.init=function(){var y=this;var t=y.config;var v='<div class="layer-box hide" id="{{layerName}}"><div class="layer-content">'+t.content+"</div></div>";var w=this.$selector=y.$selector.length?y.$selector:m(v.replace("{{layerName}}",y.$selector.selector.replace("#",""))).appendTo(t.container);var x=t.container==="body"?l:m(t.container);var s=t.closeHandle;var q=this.$content=w.find(".layer-content");var r=Number(w.attr("data-width"))||t.offsetWidth;var u=Number(w.attr("data-height"))||t.offsetHeight;q.css({width:r,height:u});w.data("layer",y)};j.prototype.ajaxLoad=function(){var r=this;var s=r.config;var u=r.$selector;var t=s.url||"?";var v=(u.attr("data-method")||s.method).toUpperCase();var q=s.dataType;if(s.cache&&u.data("success")){r.showLayer();return false}m.loading(true,true);u.data("success",1);m.ajax({url:t,type:v,dataType:q,data:s.data}).then(function(w){m.loading(false);s.successCall.apply(u,[w,this,r]);r.showLayer()},function(w){m.loading(false);r.hideLayer();s.errorCall.apply(u,[w,this,r])});return r};j.prototype.event=function(){var q=this;var r=q.config;var s=q.$selector;s.on("click.iui-layer",r.confirmHandle,function(t){t.preventDefault();r.confirmCall.apply(s,[t,this]);return false});s.on("click.iui-layer",function(t){if(m(t.target).is(s)){if(!r.shadow){return false}if(l.find(".layer-loading").length){return false}q.hideLayer();r.cancelCall.apply(s,[t,this])}});s.on("click.iui-layer",r.closeHandle,function(t){q.hideLayer();r.cancelCall.apply(s,[t,this]);return false})};j.prototype.showLayer=function(v){var s=this;var t=s.config;var r=s.$backdrop;var w=a.documentElement.clientHeight;var u=a.body.style.msTouchAction===f;var q=v;if(m("body").height()>w&(u)){m("body").css({"border-right":k+"px transparent solid",overflow:"hidden"})}s.$selector.removeClass("hide");s.$content.off(IUI_UTILS.animateEnd);if(q){s.$content.removeClass("layer-opening")}else{s.$selector.after(r);r.attr("style","opacity: 1;visibility: visible;")}s.$content.addClass("layer-opening");n(s.$content,function(x){s.$content.removeClass("layer-opening")});m(a).on("keyup.iui-layer",function(x){if(x.keyCode===27){s.$selector.trigger("click.iui-layer",t.closeHandle)}});s.$selector.trigger("layer.show",[s]);t.showCall.apply(s.$selector,[s]);return s};j.prototype.hideLayer=function(t){var r=this;var s=r.config;var q=t;r.$content.off(IUI_UTILS.animateEnd);r.$content.addClass("layer-closing");if(!q){r.$backdrop.removeAttr("style");g(r.$backdrop,function(){r.$backdrop.remove()})}n(r.$content,function(u){r.$content.removeClass("layer-closing");r.$selector.addClass("hide")});l.removeAttr("style");m(a).off("keyup.iui-layer");r.$selector.trigger("layer.hide",[this]);s.hideCall.apply(r.$selector,[r]);return r};j.prototype.cutTo=function(t,q){var r=m(t).data("layer");var s=(q?m(q):this.$selector).data("layer");s.hideLayer(true);r.showLayer(true)};j.prototype.destroy=function(){var q=this;var s=q.$selector;var r=q.config;s.off("click.iui-layer",r.confirmHandle);s.off("click.iui-layer");s.off("click.iui-layer",r.closeHandle);s.remove()};m.fn.IUI({layer:function(q){return new j(q,this)}})}(jQuery,c));(function(h){function g(k,j){var i=k;i.addClass("active "+j.animateBefore);setTimeout(function(){i.addClass(j.animateAfter)},100)}h.fn.IUI({tabs:function(i){return this.each(function(){var k={event:"click",animateBefore:"fade",animateAfter:"in",isCache:true,ajaxSetup:null};var l=h(this);var m=l.find(".tabs-item");var j=h.extend({},k,i);l.on(j.event+".iui-tabs",".tabs-item",function(o){o.preventDefault();var q=h(this);var p=q.parent();var n=h(q.attr("href"));n.trigger("tabsAjaxBefore",[j]);p.addClass("active").siblings(".active").removeClass("active");n.siblings(".tabs-content").removeClass("active "+j.animateBefore+" "+j.animateAfter);g(n,j);if(q.data("loaded")&&j.isCache){return false}if(q.data("ajax")){h.ajax(h.extend({url:q.data("ajax"),type:"GET",dataType:"html"},j.ajaxSetup)).then(function(r){q.data("loaded",true);n.trigger("tabsAjaxSuccess",[r])},function(r){console.log(r)})}g(n,j)})})}})}(jQuery));d.extend({share:function(p){var i=d.extend({title:null,summary:null,url:null,pic:d("body").find("img").eq(0).attr("src"),copybtn:"#copy-url",swbbtn:".sweibo",qzonebtn:".qzone",twbbtn:".tweibo",dbbtn:".douban",rrbtn:".renren"},p);var n=encodeURIComponent(i.title);var m=encodeURIComponent(i.summary);var j=encodeURIComponent(a.domain+i.pic);var h=encodeURIComponent(i.url+"&share=weibo");h="http://service.weibo.com/share/share.php?url="+h+"&title="+n+"&pic="+j+"&appkey=&searchPic=false";d(i.swbbtn).attr("href",h);var g=encodeURIComponent(i.url+"&share=qzone");g="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+g+"#qzone&title="+n+"&summary="+m+"&pics="+j;d(i.qzonebtn).attr("href",g);var k=encodeURIComponent(i.url+"&share=tweibo");k="http://share.v.t.qq.com/index.php?c=share&a=index&url="+k+"#tweibo&appkey=appkey&title="+m+"&pic="+j;d(i.twbbtn).attr("href",k);var o=encodeURIComponent(i.url+"&share=douban");o="http://www.douban.com/share/service?image="+j+"&href="+o+"#douban&name="+n+"&text="+m;d(i.dbbtn).attr("href",o);var l=encodeURIComponent(i.url+"&share=renren");l="http://widget.renren.com/dialog/share?resourceUrl="+l+"&srcUrl="+l+"&title="+n+"&pic="+j+"&description="+m;d(i.rrbtn).attr("href",l);d(i.copybtn).val(i.url+"&share=copy")}});d.extend({exist:function(o){var j=d.extend({obj:d("body"),parents:".form-container",type:"email",success:null},o);var m=j.obj instanceof d?j.obj:d(j.obj);var k=m.find("#"+j.type).parents(j.parents);var h=m.find('input[name="activityId"]').val();var l=m.find("#"+j.type).val();var g=d('meta[name="csrf-param"]').prop("content");var i=d('meta[name="csrf-token"]').prop("content");var n=l?"&email="+l:"";d.post("/index/init-activity",g+"="+i+"&activityId="+h+n,function(p){if(p.status){if(l){if(p.register){k.find("#"+j.type).val("");k.removeClass("none")}else{k.addClass("none")}}if(j.success){j.success(p.region)}}})}});d.extend({ajaxError:function(i){var l=this;var k=[];var n=d.extend({obj:"#message",data:null,timeout:3000,status:true},i);var j=n.obj instanceof d?n.obj:d(n.obj);var h=n.status?"success":"error";var m="";if(n.data.error.constructor!==Object){console.log("验证已经全部通过，不再执行往下方法");return false}d.each(l.find(".val-error"),function(o,s){var r=d(s).attr("name");var p=d(s).attr("data-name");var q=p?p:r;k.push(q)});if(k){d.each(k,function(o,p){d.each(n.data.error,function(q,r){if(p===q){m=r;return m}});if(m){g(m);return false}})}function g(p){var o=j.data("count")||1;clearTimeout(j.data("count"));j.html('<span class="'+h+'">'+p+"</span>").removeClass("hide none");j.data("count",setTimeout(function(){j.addClass("none")},n.timeout))}}});d.fn.IUI({ajaxForm:function(g){return this.each(function(){var j=d(this);var i={url:j.attr("action"),method:j.attr("method")||"POST",type:j.attr("data-type")||"json",data:null,ajax2:false,before:function(){},success:function(){},error:function(){},pending:function(){},always:function(){}};var h=d.extend({},i,g);j.data("deferred",h);j.on("submit",function(l){l.preventDefault();if(j.hasClass("disabled")){h.pending.call(j,h);return false}var m=h.before.call(j,l,h);var k={url:h.url,type:h.method,data:h.data||j.serialize()};if(h.ajax2){k.data=new FormData(j[0]);k.cache=false;k.contentType=false;k.processData=false}if(m===false){return false}j.addClass("disabled").prop("disabled",true);d.ajax(k).then(function(n){j.removeClass("disabled").prop("disabled",false);h.success.call(j,n,h)},function(n){j.removeClass("disabled").prop("disabled",false);h.error.call(j,n,h)}).always(function(n){h.always.call(j,n,h)})})})}});d.fn.IUI({validate:function(o){var m={isNonEmpty:function(r){var p=this.self;var q=p[0].value;if(d.trim(q).length===0){return false}},minLength:function(p){if(this.self[0].value.length<p.minLength){return false}},maxLength:function(p){if(this.self[0].value.length<p.maxLength){return false}},birthdayRange:function(s){var r=this.self[0].value;var q=s.range[0];var p=s.range[1];if(r<q||r>p){return false}},isBirthday:function(p){if(!/^[1-9]\d{3}([-|\/|\.])?((0\d)|([1-9])|(1[0-2]))\1(([0|1|2]\d)|([1-9])|3[0-1])$/.test(this.self[0].value)){return false}},isMobile:function(p){if(!/^1[3|4|5|6|7|8][0-9]\d{8}$/.test(this.self[0].value)){return false}},isEmail:function(p){if(!/(^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$)/.test(this.self[0].value)){return false}},between:function(t){var q=this.self;var s=this.self[0].value.length;var r=t.range[0];var p=t.range[1];if(s<r||s>p){return false}},onlyEn:function(p){if(!/^[A-Za-z]+$/.test(this.self[0].value)){return false}},onlyZh:function(p){if(!/^[\u4e00-\u9fa5]+$/.test(this.self[0].value)){return false}},notInt:function(p){if(/^[0-9]*$/.test(this.self[0].value)){return false}},onlyNum:function(p){if(!/^[0-9]+([.][0-9]+){0,1}$/.test(this.self[0].value)){return false}},onlyInt:function(p){if(!/^[0-9]*$/.test(this.self[0].value)){return false}},isChecked:function(q){var p=void (0);this.self.each(function(r,s){p=s.checked;return p?false:true});return p?void (0):false},isNickname:function(p){if(!/^[A-Za-z0-9_\-\u4e00-\u9fa5]{2,20}$/i.test(this.self[0].value)){return false}}};var h={globalMessage:false,errorClass:".validate-error",infoClass:".validate-info",successClass:".validate-success",collections:[],strategy:m};var g=this;function i(p){this.container="body";this.options=d.extend(true,{},h,p);this.$selector=g;this.cache={};this.errors={};this.init()}i.prototype.init=function(){var p=this;var q=["info","success","error"];if(p.options.collections.length===0){return false}p.add();d.each(p.cache,function(t,r){if(r.context.length===0){return}var u=/validate-context-(info|success|error)/.exec(r.context[0].className);var s;if(u){s=u[1];r.self.data("validateStatus",d.inArray(s,q))}})};i.prototype.mapping=function(r){var p=this.$selector.find("[data-required="+r.required+"]");var q=p.parents(r.context).eq(0);var s;if(q.length===0){s="{context:"+r.context+"} is invalid , it may prevent the triggering event";if(c.console){console.warn(s)}else{throw s}}if(this.cache[r.required]){return false}d.extend(true,this.cache,(function(){var t={};var u=t[r.required]={};u.matches={};u.self=p;u.context=q;u.infoMsg=r.infoMsg||"";u.options=r;d.extend(true,u.matches,r.matches);return t}()))};i.prototype.remove=function(w){var z=this;var A=z.options;var q=z.cache;var u,t=0,v,r,p,x,y,s;if(typeof w!=="string"){return false}u=w.split(" ");v=u.length;for(r in q){p=q[r].self;x=p.data("required");y=p[0]?p[0].type:"";s=z.$selector.find("[data-required="+x+"]");if(d.inArray(x,u)!==-1){if(d.inArray(y,["checkbox","file","radio"])!==-1){s.off("change.iui-validate")}else{s.off("focus.iui-validate blur.iui-validate")}s.data("event.iui-validate",false);delete q[r]}}z.bindEvent()};i.prototype.add=function(q){var p=this;var s=q||p.options.collections;for(var r=0;r<s.length;r++){var t=p.$selector.find('[data-required="'+s[r].required+'"]');var u='iui-validate:cannot find element by data-required="'+s[r].required+'"';if(t.length){p.mapping(s[r])}else{if(c.console){console.warn(u)}else{throw u}}}if(q){d.merge(p.options.collections,q)}p.bindEvent()};i.prototype.bindEvent=function(){var p=this;var q=n.call(this);var s=p.$selector;var r=["select-one","select-multiple","radio","checkbox","file"];d.each(q,function(u,x){var t=s.find(x);var v,w;if(t[0]===void 0){return}v=t[0].type;w=x.replace("[","").replace("]","").split("=")[1];if(t.data("event.iui-validate")){return}if(d.inArray(v,r)!==-1){t.on("change.iui-validate",{self:p},l);t.data("event.iui-validate",true);return}t.on("focus.iui-validate",{self:p},k);if(p.cache[w].options.unblur!==true){t.on("blur.iui-validate",{self:p},j)}t.data("event.iui-validate",true)})};i.prototype.verify=function(u,q){var t=d(this);var r=u.cache[t.data("required")];var s=r.matches;var p=false;d.each(s,function(w,x){var v=u.options.strategy[w].call(r,x);p=v===void (0)?1:2;t.data("validateStatus",v);u.message(p,r,w);return p===2?false:true});t.trigger("validate."+q,r);return p};i.prototype.message=function(t,p,w){var v,u,s,q,r,x=this.errors;if(t===0){v=this.options.infoClass;s=p.infoMsg}else{if(t===1){v=this.options.successClass;s=""}else{if(t===2){v=this.options.errorClass;s=p.matches[w].errMsg}else{}}}if(t===2){x[p.options.required]=s}if(!this.options.errorClass){return false}u=["info","success","error"];r=this.options.globalMessage?d(this.options.globalMessage):p.context;v=v.replace(/\./g," ").slice(1);r.removeClass("validate-context-info validate-context-success validate-context-error").addClass("validate-context-"+u[t]).find(".validate-message").remove();q=d('<div class="validate-message '+v+'" >'+s+"</div>");r.append(q)};i.prototype.batch=function(r){var q=this;var p=[];d.each(this.cache,function(u,v){if(v.self[0].disabled){return}var t=v.self.data("validateStatus");var s=!t?q.verify.call(v.self,q,"batch"):t;if(r&&s===2){p.push(s);return false}p.push(s)});return d.inArray(2,p)===-1?true:false};function n(){var p=[];var r=this.cache;for(var q in r){p.push("[data-required="+q+"]")}return p}function k(s){var q=s.data.self;var t=d(this);var p=t.data("required");var r=q.cache[p];if(q.options.infoClass){q.message(0,r)}t.trigger("validate.focus",r)}function j(q){var s=d(this);var p=q.data.self;var r=s.data("required");p.verify.call(this,p,"blur")}function l(q){var p=q.data.self;p.verify.call(this,p,"change")}return new i(o)}});(function(h){function g(i,k){var j={showHandle:"mouseenter",hideHandle:"mouseleave",custom:false,customHtml:"",direc:"top",leftOffset:0,topOffset:0,className:"",template:'<div class="tooltip {{className}}"><div class="tooltip-arrow">{{customHtml}}</div><div class="tooltip-body"></div></div>',showCallback:function(){},hideCallback:function(){}};h.extend(j,i);this.$selector=k;this.options=j;this.init()}g.prototype={init:function(){this.addEvent()},addEvent:function(){var i=this.options;var j=this.$selector;j.on(i.showHandle,"[data-tooltip]",function(C){if(C.type==="click"){C.stopPropagation()}var F=h(this);var u=F.attr("data-tooltip");var I=i.list[u];var v=this;var y=v.getBoundingClientRect();var J=y.left;var n=y.top;var H=v.offsetWidth;var q=v.offsetHeight;var x=I&&I.direc||i.direc,r=I&&I.leftOffset||i.leftOffset,A=I&&I.topOffset||i.topOffset,z=I&&I.content,k=I&&I.custom||i.custom,o=I&&I.customHtml||i.customHtml,l=I&&I.className||i.className||"",t=I&&I.showCallback||i.showCallback,D=I&&I.hideCallback||i.hideCallback;var G;var K;var p;var m,s;var B;var E,L;var w=i.template.replace("{{className}}",l);if(k){w=w.replace("{{customHtml}}",o)}else{w=w.replace("{{customHtml}}","")}h(".tooltip").remove();F.after(w);G=F.next(".tooltip");B=G.find(".tooltip-arrow");if(!k){B.addClass(x)}E=B[0].offsetWidth;L=B[0].offsetHeight;G.find(".tooltip-body").html(z);K=G[0].offsetWidth;p=G[0].offsetHeight;switch(x){case"top":m=J+(H-K)/2;s=n-p-A-L;break;case"right":m=J+H+r+E;s=n+(q-p)/2;break;case"bottom":m=J+(H-K)/2;s=n+q+A+L;break;case"left":m=J-K-r-E;s=n+(q-p)/2;break;case"topLeft":m=J-K-r-E/2;s=n-p-A-L/2;break;case"topRight":m=J+H+r+E/2;s=n-p-A-L/2;break;case"bottomLeft":m=J-K-r-E/2;s=n+q+A+L/2;break;case"bottomRight":m=J+H+r+E/2;s=n+q+A+L/2;break}G.css({top:s,left:m});t.call(I,i)});if(i.hideHandle==="mouseleave"){j.on(i.hideHandle,"[data-tooltip]",function(){var m=h(this);var n=m.attr("data-tooltip");var l=i.list[n];var k=l&&l.hideCallback||i.hideCallback;h(".tooltip").remove();k.call(i)})}else{h(a).on(i.hideHandle,function(m){var n=h(this);var o=n.attr("data-tooltip");var l=i.list[o];var k=l&&l.hideCallback||i.hideCallback;h(".tooltip").remove();k.call(i)})}}};h.fn.IUI({tooltip:function(i){return new g(i,this)}})})(jQuery);d.fn.IUI({emailSuffix:function(g){return this.each(function(){var k={container:"body",style:"global",item:"email-item",current:"checked",emails:["163.com","126.com","qq.com","gmail.com","sina.com","139.com","189.com","sohu.com"],delay:300,offsetLeft:d(this).offset().left,offsetTop:d(this).offset().top,offsetWidth:d(this).outerWidth(),offsetHeight:d(this).outerHeight(),checkedCall:function(){}};var p=d(this);var i=d.extend({},k,g);var m=d('<ul class="email-list hide"></ul>');var l=d(i.container);var j=null;var n=function(q,r){var w="";var v=r.value||null;var t=v?v.split("@")[0]:false;var u=v?v.split("@")[1]:false;for(var s=0;s<q.length;s++){email=q[s];if((t&&!u)||u&&email.indexOf(u)!==-1){w+='<li class="'+i.item+'" data-value="'+t+"@"+email+'">'+t+"@"+email+"</li>"}}return w};var o=function(x,w,v){var t=[38,40];if(d.inArray(x,t)===-1||w.hasClass("hide")){return false}var u=d.inArray(x,t)>=1?true:false;var r=w;var q=r.find("li").length;var s=r.find("li.checked");r.find("li").removeClass("checked");if(u){if(s.length&&s.index()!==q-1){s.next().addClass("checked")}else{r.find("li").eq(0).addClass("checked")}}else{if(s.index()>0){s.prev().addClass("checked")}else{r.find("li").eq(q-1).addClass("checked")}}v.val(d.trim(r.find("li.checked").text()));i.checkedCall.apply(p,[event,i])};var h=function(){var s=i.offsetLeft;var r=i.offsetTop;var q=i.offsetWidth;m.css({left:s,top:r+i.offsetHeight,width:q})};h();if(i.style==="global"){l.append(m);d(c).on("resize.emailSuffix",h)}else{p.parent().append(m)}p.on("keyup.emailSuffix",function(q){var s=this.value;if(s.charAt(0)!=="@"&&s.split("@").length===2&&d.inArray(q.keyCode,[40,38,13])===-1){var r=n(i.emails,this);m.html(r).removeClass("hide").find("li").eq(0).addClass("checked")}else{if(d.inArray(q.keyCode,[40,38,13])===-1){m.html("").addClass("hide")}}});p.on("keydown.emailSuffix",function(r){var q=m.find("li.checked");o(r.keyCode,m,p);if(r.keyCode===13){r.preventDefault();if(q.length){p.val(d.trim(q.text()))}m.addClass("hide")}});p.on("blur.emailSuffix",function(q){j=setTimeout(function(){m.addClass("hide")},i.delay)});m.on("click","."+i.item,function(q){q.preventDefault();clearTimeout(j);p.val(d(this).attr("data-value")).focus();m.addClass("hide");i.checkedCall.apply(p,[q,i]);return false})})}});d.fn.IUI({placeholder:function(g){if("placeholder" in a.createElement("input")){return}var i={color:"#999",zIndex:1,top:0,left:0},j=d.extend({},i,g||{}),h=d(this).find('input[type="text"],input[type="password"],input[type="tel"],input[type="email"]');return h.each(function(l,q){var p=d(q),m=q,o=p.attr("placeholder");var k=d("<label></label>").css({position:"absolute",top:j.top,left:j.left,color:j.color,zIndex:j.zIndex,height:0,lineHeight:p.css("height"),fontSize:p.css("fontSize"),paddingLeft:p.css("textIndent")?p.css("textIndent"):p.css("paddingLeft"),background:"none",cursor:"text"}).text(o).insertBefore(p);p.parent().css({position:"relative"});if(p.val()){k.hide()}k.on({click:function(){k.hide();p.focus()}});p.on({focus:function(){k.hide()},blur:function(){if(!p.val()){k.show()}},input:function(){if(p.val()){k.hide()}else{k.show()}}});m.onpropertychange=function(n){n=n||c.event;if(n.propertyName==="value"){var r=d(this);if(r.val()){d(this).prev("label").hide()}else{d(this).prev("label").show()}}}})}});d.fn.IUI({typeCount:function(g){return this.each(function(){d(this).on("keyup","input[type=text],textarea",function(k){k.preventDefault();var l=d(this);var h=l.parent().find("span.count");var i=parseInt(h.text().split("/")[1]);var j=this.value.length;if(j>i){h.addClass("error")}else{h.removeClass("error")}h.html(j+"/"+i)});d(this).find("input,textarea").trigger("keyup")})}});d.fn.IUI({lrselect:function(s){var k={level:1,dataJson:"",afterMoveLeft:function(){},afterMoveRight:function(){}};var q=this;var p;var m={self:{ele:".lrselect",contraryEle:".lrselect-to"},to:{ele:".lrselect-to",contraryEle:".lrselect"}};var j={self:{ele:".lrselect .level-2",contraryEle:".lrselect-to .level-2"},to:{ele:".lrselect-to .level-2",contraryEle:".lrselect .level-2"}};q.$container=d(this);q.$multi=q.$container.find(".lrselect");q.$multiTo=q.$container.find(".lrselect-to");q.config=d.extend({},k,s);d(c).on("keydown.win",function(t){t.preventDefault();switch(t.which){case 17:case 91:q.$container.data("type","mul");break;case 16:q.$container.data("type","continu");break}});d(c).on("keyup.win",function(t){t.preventDefault();q.$container.data("type","")});var g=function(v,u,t){this.execute=v;this.value=u;this.dire=t};var n=function(){var t=[];var u=[];return{execute:function(v){v.execute();t.push(v);p.setValue(v.dire)},undo:function(){if(!t[0]){return false}var v=t.pop();u.push(v);p.undo(v.value,v.dire);p.setValue(v.dire)},redo:function(){if(!u[0]){return false}var v=u.pop();t.push(v);p.redo(v.value,v.dire);p.setValue(v.dire)}}};function i(){this.calculator=new n();this.init()}i.prototype={init:function(){q.mulData=q.config.level>=2?j:m;this.render(q.config.dataJson);this.setCommandFn();this.events();this.operateEvent()},render:function(u){var t=h(u);q.$multi.append(t.item);q.$container.find("select").css("display","none").append(t.option);if(q.config.level>=2){q.mulData=j;q.$multiTo.append(q.$multi.children().clone());q.$multiTo.find(".level-2 li").remove();q.$container.on("click",".mul-title",function(){d(this).toggleClass("active").parent("li").find(".level-2").toggleClass("hide")})}},setCommandFn:function(){var t=this;q.setCommand=function(v,u){var w=t.getId(v);t.calculator.execute(u(w))};q.moveTo=function(){o("to")};q.move=function(){o("self")};q.moveToAll=function(){o("to","all")};q.moveAll=function(){o("self","all")};q.moveToTitle=function(){o("to","title")};q.moveTitle=function(){o("self","title")};q.toCommand=function(u){return new g(q.moveTo,u,"to")};q.selfCommand=function(u){return new g(q.move,u,"self")};q.allToCommand=function(u){return new g(q.moveToAll,u,"to")};q.allSelfCommand=function(u){return new g(q.moveAll,u,"self")};q.titleToCommand=function(u){return new g(q.moveToTitle,u,"to")};q.titleSelfCommand=function(u){return new g(q.moveTitle,u,"self")}},events:function(){var v=this;var u=q.mulData.self.ele+" li";var t=q.mulData.to.ele+" li";q.$container.on("click",u,function(w){v.itemClick(d(this),"self")});q.$container.on("click",t,function(w){v.itemClick(d(this),"to")});q.$container.on("dblclick",u,function(w){var x=d(this);q.setCommand(x,q.selfCommand)});q.$container.on("dblclick",t,function(w){var x=d(this);q.setCommand(x,q.toCommand)});if(q.config.level>=2){q.$multi.on("dblclick",".mul-title",function(w){v.moveTitle(d(this))});q.$multiTo.on("dblclick",".mul-title",function(w){v.moveToTitle(d(this))})}},operateEvent:function(){var t=this;if(!q.$container.find(".lrselect-right").length){return}q.$container.on("click",".lrselect-right",function(){t.move()});q.$container.on("click",".lrselect-left",function(){t.moveTo()});q.$container.on("click",".lrselect-rightAll",function(){t.moveAll()});q.$container.on("click",".lrselect-leftAll",function(){t.moveToAll()});q.$container.on("click",".lrselect-undo",function(){t.calculator.undo()});q.$container.on("click",".lrselect-redo",function(){t.calculator.redo()})},itemClick:function(E,C){var A=q.$container.data("type");var y=E.parent("ul");var D=y.find("li");var B=q.mulData[C].ele+" li";if(A=="mul"){E.toggleClass("current");return}if(A=="continu"){var x=y.find("li.current").eq(0);var t=D.index(x);var z=D.index(E);var u=z>t?t:z;var v=z<t?t:z;if(t<0){E.addClass("current");return}D.removeClass("current");for(var w=u;w<=v;w++){D.eq(w).addClass("current")}return}q.$container.find(B).removeClass("current");E.addClass("current")},getId:function(t){var v=[];var u=t;d.each(u,function(w,x){v.push(d(x).data("id"))});v=v.join(",");return v},moveTo:function(){var t=q.$multiTo.find("li.current");q.setCommand(t,q.toCommand)},move:function(){var t=q.$multi.find("li.current");q.setCommand(t,q.selfCommand)},moveToAll:function(){var t=q.$multiTo.find("li");q.setCommand(t,q.allToCommand)},moveAll:function(){var t=q.$multi.find("li");q.setCommand(t,q.allSelfCommand)},moveToTitle:function(t){var u=t.parent("li").find(".level-2 li");t.addClass("current");q.setCommand(u,q.titleToCommand)},moveTitle:function(t){var u=t.parent("li").find(".level-2 li");t.addClass("current");q.setCommand(u,q.titleSelfCommand)},undo:function(w,t){var x=q.$container.find(q.mulData[t].contraryEle);var y=q.$container.find(q.mulData[t].ele);var A=w.split(",");var v=[];for(var u=0;u<A.length;u++){var z=x.find('li[data-id="'+A[u]+'"]');v.push(z)}if(q.config.level>=2){l(v,y);return}y.append(v);r(y)},redo:function(w,t){var x=q.$container.find(q.mulData[t].ele);var y=q.$container.find(q.mulData[t].contraryEle);var A=w.split(",");var v=[];for(var u=0;u<A.length;u++){var z=x.find('li[data-id="'+A[u]+'"]');v.push(z)}if(q.config.level>=2){l(v,y);return}y.append(v);r(y)},setValue:function(t){var v=q.$container.find(q.mulData.to.ele+" li");var u=[];q.$container.find("select option").prop("selected",false);d.each(v,function(w,x){q.$container.find('select option[value="'+d(x).data("value")+'"]').prop("selected",true)});switch(t){case"to":q.config.afterMoveLeft();break;case"self":q.config.afterMoveRight();break}}};p=new i();function h(w){var y="";var x="";var z="";if(q.config.level===1){for(var v=0;v<w.length;v++){y+='<li data-id="'+(v+1)+'" data-value="'+w[v].value+'">'+w[v].name+"</li>";z+='<option data-id="'+(v+1)+'" value="'+w[v].value+'">'+w[v].name+"</option>"}}if(q.config.level===2){for(var t=0;t<w.length;t++){x="";for(var u=0;u<w[t].child.length;u++){x+='<li data-id="'+((t+1)*10+(u+1))+'" data-value="'+w[t].child[u].value+'">'+w[t].child[u].name+"</li>";z+='<option data-id="'+((t+1)*10+(u+1))+'" value="'+w[t].child[u].value+'">'+w[t].child[u].name+"</option>"}y+='<li data-id="'+(t+1)+'"><div class="mul-title">'+w[t].name+'</div><ul class="level-2">'+x+"</ul></li>"}}return{option:z,item:y}}function r(y){var t=y.find("li");var x=[];var w=[];var A;for(var v=0;v<t.length;v++){var z=t.eq(v).data("id");x.push(z)}Array.prototype.sort.call(x,function(B,C){return B-C});for(var u=0;u<x.length;u++){A=y.find('li[data-id="'+x[u]+'"]');w.push(A)}y.html("").append(w)}function l(t,u){d.each(t,function(v,w){w=w instanceof d?w:d(w);var y=w.data("id");var x=Math.floor(y/10)-1;u.eq(x).append(w)});d.each(u,function(v,w){r(d(w))})}function o(t,u){var x=q.$container.find(q.mulData[t].ele+" li.current");var w=q.$container.find(q.mulData[t].ele+" li");var v=q.$container.find(q.mulData[t].contraryEle);if(u==="all"){x=w}if(u==="title"){x=d(".mul-title.current").parent("li").find(".level-2 li");d(".mul-title").removeClass("current")}if(q.config.level>=2){l(x,v);return}v.append(x);r(v)}return{moveRight:function(t){t.addClass("current");q.setCommand(t,q.selfCommand)},moveLeft:function(t){t.addClass("current");q.setCommand(t,q.toCommand)},moveRightAll:function(){var t=q.$multi.find("li");q.setCommand(t,q.allSelfCommand)},moveLeftAll:function(){var t=q.$multiTo.find("li");q.setCommand(t,q.allToCommand)},updateJson:function(t,u){q.$multi.html("");q.$multiTo.html("");q.$container.find("select").html("");p.calculator=new n();if(u&&u!=q.config.level){q.config.level=Math.min(2,u);q.mulData=q.config.level>=2?j:m}p.render(t);p.events()}}}});(function(j,h,g,k){function i(l,m){this.options=j.extend({},i.defaults,m);this.$container=j(this.options.container);this.$selector=j(l);this.init();this.event()}i.defaults={dataJson:null,container:"body",template:'<div class="selector-level selector-level-{{level}} {{csname}}"><a href="javascript:;" role="name" class="selector-name selector-name-dcolor" data-caller="{{caller}}">{{name}}</a><input type="hidden" name="{{field}}" role="input" value=""><ul role="content" class="selector-list hide">{{content}}</ul></div>',placeholder:["请选择省份","请选择市","请选择区"],field:["userProvinceId","userCityId","userAreaId"],iscity:true,iselect:false,iscode:false,isvalue:true,shorthand:false,values:[],level:1,joinHtml:function(r,s,l,w){var m=r;var u=m.length;var t=s||"100000";var n=this.options.iselect?"<option>"+w+"</option>":"";var q=this.options.iselect?"<option>"+w+"</option>":"";if(l<0){return n}for(var p=0;p<u;p++){var v=this.options.shorthand?m[p].shortName:m[p].name;var o=this.options.isvalue?m[p].id:m[p].name;var x=this.options.iscode&&m[p].cityCode!==""?"data-code="+m[p].cityCode:"";if(this.options.iscity&&m[p].parentId===t){if(this.options.iselect){n+='<option data-item="'+l+'" value="'+o+'">'+v+"</option>"}else{n+='<li data-item="'+l+'" data-id="'+m[p].id+'" '+x+">"+v+"</li>"}}else{if(this.options.iselect){q+='<option data-item="'+l+'" value="'+o+'">'+v+"</option>"}else{q+='<li data-item="'+l+'" data-id="'+m[p].id+'" '+x+">"+v+"</li>"}}}if(this.options.iscity){return n}return q},startClick:null};i.prototype.init=function(){var l=this;var m=l.options;var o,q,p;for(var n=0;n<m.level;n++){q=m.placeholder[n]||"";o=m.template.replace("{{level}}",n+1).replace("{{caller}}",n+1);if(!n){o=o.replace("{{content}}",m.joinHtml.call(this,m.dataJson,null,n+1,q))}else{o=o.replace("{{content}}",m.joinHtml.call(this,m.dataJson,null,-1,q))}if(o.indexOf("{{name}}")!==-1){o=o.replace("{{name}}",q)}if(o.indexOf("{{field}}")!==-1||o.indexOf("{{csname}}")!==-1){p=m.field[n]||"";o=o.replace("{{field}}",p).replace("{{csname}}",p)}l.$selector.append(o)}};i.prototype.event=function(){var l=this;var m=l.options;var p=l.$selector;for(var n=0;n<m.level;n++){(o)(n)}if(!m.iselect){j(g).on("click.iselector",function(r){var s=r||h.event;var q=s.target||s.srcElement;while(q){if(q.className&&q.className.indexOf(l)>-1){return}q=q.parentNode}l.$selector.find('[role="content"]').addClass("hide")})}function o(r){var q=n+1;if(m.iselect){p.on("change.iselector",'[data-caller="'+q+'"]',function(s){var t=j(this);l.hideSelector(t,r,true)})}else{p.on("click.iselector",'[data-caller="'+q+'"]',function(t){var u=j(this);var s=p.find('[role="content"]');s.addClass("hide").eq(r).removeClass("hide");if(typeof m.startClick==="function"){m.startClick.apply(this,[l,u,m])}return false});p.on("click.iselector",'[data-item="'+q+'"]',function(s){var t=j(this);m.values=[];l.hideSelector(t,r,false)})}}};i.prototype.hideSelector=function(r,s,t){var z=this;var n=z.options;var y=z.$selector;var x=y.find('[role="name"]');var v=y.find("[data-caller]");var u=y.find('[role="input"]');var l=y.find('[role="content"]');var q=t?r.val():r.attr("data-id");var o=r.text();var m=s+1;var p=s+2;var w=n.placeholder[m]||"";if(t){w=n.placeholder[m]||"";l.eq(m).html(n.joinHtml.call(z,n.dataJson,q,p,w));l.eq(m).find("[data-item]").eq(0).prop("selected",true).trigger("change")}else{r.addClass("checked").siblings(".checked").removeClass("checked");x.eq(s).text(o).removeClass("selector-name-dcolor");u.eq(s).val(q);l.eq(m).html(n.joinHtml.call(z,n.dataJson,q,p,w));l.eq(m).find("[data-item]").eq(0).trigger("click");l.eq(s).addClass("hide")}n.values.unshift(q);y.trigger("choose-"+m,[z,r,m,n.values])};j.fn.IUI({iselector:function(l){return this.each(function(){if(!j(this).data("iselector")){j(this).data("iselector",new i(this,l))}})}})})(jQuery,c,a);(function(j){var i={readOnly:false,contain:".tokenize",remove:"",maxLength:20,overLimitCount:function(){},existToken:function(){},searchCallback:function(){},choiceCallback:function(){},removeCallback:function(){}};var g={top:38,right:39,bottom:40,left:37,enter:13,back:9};var l={spanTemplate:['<span class="token-item">','<span>{text}</span><span data-value="{value}" class="token-close">x</span>',"</span>"].join(""),optionTemplate:'<option selected="selected" value="{value}">{value}</option>',liTemplate:'<li class="hidden" data-value="{value}">{value}</li>',inputTemplate:'<div class="token"> <span> <input type="text" maxlength="{{maxlength}}" style="width: {{width}}px"> </span> </div>'};var h=function(m,o){if(!j(this).hasClass("tokenize-level")){var n=j(this);n.parents(o.contain).find("li").removeClass("current");n.addClass("current")}};var k=j.fn.tokenize=function(m){var n=j.extend({},i,m);l.inputTemplate=l.inputTemplate.replace("{{maxlength}}",n.maxLength).replace("{{width}}",n.maxLength*12);return this.each(function(o,p){var r=j(this);var q=r.attr("data-limitCount")*1;if(typeof q!=="number"||isNaN(q)){q=Infinity}r.data({showAll:r.attr("data-showAll")==="false"?false:true,create:r.attr("data-create")==="false"?false:true,limitCount:q});r.append(l.inputTemplate);k.renderSelect(r);k.setEvent(r,n);r.find("li[uled]").each(function(s,t){j(t).addClass("current "+n.remove).trigger("click")});r.find(".tokenize-level").removeClass("hide")})};k.renderSelect=function(m){var n=m.find("select").prop("outerHTML");n=(n+"").replace(/<optgroup\s+label="(.*)".*>/g,'<li class="tokenize-level">$1<ul class="tokenize-menu">');n=n.replace(/<\/optgroup>/g,"</ul></li>");n=n.replace(/select/g,"ul").replace(/option/g,"li").replace(/value/g,"data-value");m.append(n)};k.createToken=function(r,n,p){var o=j(this).parents(p.contain).find("input").val("");var m=o.parent();var q=l.spanTemplate.replace("{text}",r).replace("{value}",n);j(q).insertBefore(m)};k.setEvent=function(m,n){if(n.readOnly===false){m.on("click",".token-close",function(p){p.stopPropagation();var r=j(this);var o=r.parents(n.contain);var q=r.attr("data-value");var s=o.find('li[data-value="'+q+'"]');if(s.hasClass("no-remove")){return}o.find('option[value="'+q+'"]').removeAttr("selected");s.removeClass("hidden");s.parents("li").eq(0).removeClass("hide");r.parent(".token-item").remove();k.hideToken(o);n.removeCallback.call(o)});m.on("click",".token",function(o){o.stopPropagation();var p=j(this);p.find("input").focus();k.searchToken.call(p.find("input")[0],n)});m.on("keyup","input",function(q){var o=q.keyCode;var p=g;if(o!==p.enter&&o!==p.back&&o!==p.bottom&&o!==p.top){k.searchToken.call(this,n)}});m.on("keyup",">ul,input",function(q){var o=q.keyCode;var p=g;if(o===p.enter||o===p.back){k.setToken.call(this,n)}});m.on("keyup",function(q){var o=q.keyCode;var p=g;if(o===p.bottom||o===p.top){m.off("mouseenter.tokenize");k.turnToken.call(this,o);m.one("mousemove",">ul",function(r){m.on("mouseenter.tokenize","li",function(s){h.call(this,s,n)})})}});m.on("mouseenter.tokenize","li",function(o){h.call(this,o,n)})}else{m.find("input").attr("readonly","readonly")}m.on("click","li",function(o){if(!j(this).hasClass("tokenize-level")){k.setToken.call(this,n)}else{o.stopPropagation()}})};k.searchToken=function(r){var o=j(this).parents(r.contain);var p=o.find(">ul").removeClass("hide").find("li").not(".tokenize-level").removeClass("current").not(".hidden");var n=o.data("showAll");var m=j.trim(this.value);var q=0;p.each(function(t,v){var u=j(v);var s=u.text();var w=q!==0?"":"current";if((n||m!=="")&&s.indexOf(m)>-1){++q;u.removeClass("hide").addClass(w)}else{u.addClass("hide")}});r.searchCallback.call(o);k.hideTitle.call(o)};k.setToken=function(p){var m=j(this).parents(p.contain);var n=m.find("li").not(".tokenize-level");var s=n.filter(".current");var t;var r;var o=m.find(".token input");var u=j.trim(o.val());if(!k.testCount.call(this,p)){p.overLimitCount(m);return}if(!k.testExist.call(this,p)){p.existToken(m);return}if(s.length){s.removeClass("current").addClass("hidden");k.createToken.call(this,s.text(),s.attr("data-value"),p);r=n.index(s);m.find("option").eq(r).attr("selected","selected")}else{var q=m.find("ul");if(m.data("create")&&q.length===1&&u){m.find("ul").append(l.liTemplate.replace(/\{value\}/g,u));k.createToken.call(this,u,u,p);m.find("select").append(l.optionTemplate.replace(/\{value\}/g,u))}}k.hideToken(m);p.choiceCallback.call(m)};k.turnToken=function(r){var s=j(this);var o=s.find(">ul");var n=s.find("li").not(".tokenize-level");var u=n.height();var t=n.filter(":visible");var q=t.filter(".current");var p=t.index(q);var m=t.length;if(m){if(r===40){p=(p+1)%m}else{if(p!==0){p=--p}else{p=--m}}q.removeClass("current");t.eq(p).addClass("current");o.scrollTop(p*u)}};k.hideToken=function(m){j(a).click(function(n){k.hideToken(j(".tokenize"))});return function(n){n.find(">ul").addClass("hide");n.find("li").not(".tokenize-level").addClass("hide")}}();k.hideTitle=function(){var m=this.find(".tokenize-level");m.each(function(n,p){var o=j(p);if(o.find("li:not(.hidden):not(.hide)").length>0){o.removeClass("hide")}else{o.addClass("hide")}})};k.testCount=function(p){var m=j(this).parents(p.contain);var o=m.data("limitCount");var n=m.find(".token-item").length;if(o!==Infinity){if(n>=o){return false}}return true};k.testExist=function(p){var o=j(this).parents(p.contain);var q=j.trim(o.find(".token input").val());var n=o.find(".token-item");var m=true;n.each(function(s,t){var r=j(t).find("span").eq(0);if(r.text()===q){m=false;return}});return m};j.fn.IUI({tokenize:k})})(jQuery);(function(){var h='<div class="IUI-dialog-container hide"><div role="content"></div><div role="operate"><a href="javascript:;" role="confirm" class="btn btn-primary">确定</a><a href="javascript:;" class="btn btn-default" role="cancel">取消</a></div></div>';var i={handle:"[data-dialog]",container:"body",offsetX:0,offsetY:10,compiler:null,data:{}};function g(j){this.$selector=d(j.handle);this.$template=d(h);this.$container=d(j.container);this.config=j;this.containerPos=d(j.container)[0].getBoundingClientRect();this.init()}g.prototype.init=function(){var j=this;this.$container.on("click.IUI-dialog",this.config.handle,function(k){var l=d(this);var m=l.data("dialogid")?(".dialog-"+l.data("dialogid")):".dialog";l.trigger("show"+m,[j]);j.show(l);l.trigger("after"+m,[j]);k.stopPropagation()});this.$container.on("click.IUI-dialog",function(k){var l=d(this);l.trigger("hide.dialog",[j]);j.hide()});this.$container.on("click",".IUI-dialog-container",function(k){k.stopPropagation()});this.$container.on("click",'.IUI-dialog-container [role="cancel"]',function(k){var l=d(this);var n=j.$template.data("caller").data("dialogid");var m=n?(".dialog-"+n):".dialog";j.hide();l.trigger("cancel"+m,[j])});this.$container.on("click",'.IUI-dialog-container [role="confirm"]',function(k){k.preventDefault();var l=d(this);var n=j.$template.data("caller").data("dialogid");var m=n?(".dialog-"+n):".dialog";l.trigger("confirm"+m,[j])})};g.prototype.show=function(s){var q=this.config;var o=s;var w=s[0].getBoundingClientRect();var y=w.left;var x=w.top;var p=this.containerPos.left;var m=this.containerPos.top;var v=o.outerWidth()/2;var u=o.outerHeight();var r=this.$template;var l=d(o.attr("data-dialog"));var t=q.compiler?q.compiler(o.attr("data-dialog").replace(/\#|\./,""),q.data):l.html();var k=d(a).width();var n=d(a).height();var j="";this.$container.css({position:"relative"});r.find('[role="content"]').html(t);r.appendTo(q.container).removeClass("hide");y-=r.outerWidth()/2-v+q.offsetX;x-=m-u-this.$container.scrollTop()-q.offsetY;if(k-w.left<r.outerWidth()/2){y=w.left-(r.outerWidth()-v*2);j="right"}else{if(w.left===0){y=w.left;j="left"}}r.removeClass("left right").addClass(j).css({left:y,top:x}).data("caller",o).data("dialog",this)};g.prototype.hide=function(){this.$container.removeAttr("style");this.$template.remove()};d.extend({dialog:function(j){return new g(d.extend({},i,j))}})}());d.fn.IUI({hideNavbar:function(v){var q=this;var r=d(".navbar");var t=r.outerHeight()/2;var m=this.hasClass("hide-navbar-on-scroll");var i,l,u,j,p,k,h,s,n;if(!m&&!r.length){return false}i=l=Math.abs(q.scrollTop());n=IUI_UTILS.throttle(o,100);q.on("scroll",n);function o(w){l=q.scrollTop();u=this.scrollHeight;j=this.offsetHeight;h=r.hasClass("navbar-hidden");s=i<=l;i=l;if(l<t||i>l){g(false);return false}g(s);return false}function g(w){if(w){if(r.hasClass("navbar-hidden")){return false}r.addClass("navbar-hidden")}else{if(!r.hasClass("navbar-hidden")){return false}r.removeClass("navbar-hidden")}}}});d.fn.IUI({fresh:function(h){var k={diretion:true,startTouch:function(){},afterFresh:function(){}};function m(p,o){this.container=p;this.options=d.extend(true,k,o);this.event()}m.prototype.event=function(){var r=this;var p,o,q;a.body.addEventListener("touchmove",function(s){if(r.lock){s.preventDefault();s.stopPropagation()}},false);this.container.on({touchstart:function(s){j(s);p=s.touches[0].pageY;g.call(r,0);r.options.startTouch.call(r)},touchmove:function(s){j(s);var t;o=s.touches[0].pageY;if(r.options.diretion){n.call(r,p,o,q)}else{l.call(r,p,o,q)}},touchend:function(s){if(r.lock){g.call(r,300);i(r.container,0);r.lock=0;r.options.afterFresh.call(r)}}})};function n(r,q,s){var t=this.container;var p=t.height();var o=t.find('[role="freshList"]').height();if(q>r){this.lock=0}if(q<r&&t.scrollTop()+p>=o){if(!this.lock){this.lock=1}s=q-r;_translate=Math.round(s*0.5);if(s<-10){_translate=Math.round((s*0.5+10)*0.3-10)}i(t,_translate)}}function l(p,o,q){var r=this.container;if(o<p){this.lock=0}if(o>p&&r.scrollTop()<=0){if(!this.lock){this.lock=1}q=o-p;_translate=Math.round(q*0.5);if(q>10){_translate=Math.round((q*0.5+10)*0.3-10)}i(r,_translate)}}function j(o){if(!o.touches){o.touches=o.originalEvent.touches}}function i(o,p){o.css({"-webkit-transform":"translateY("+p+"px)",transform:"translateY("+p+"px)"})}function g(o){this.container.css({"-webkit-transition-duration":o+"ms","transition-duration":o+"ms"})}return new m(this,h)}});d.fn.IUI({panel:function(q){var p=this;var k=d("body");var o=d('<div class="panel-overlay hide"></div>');var n=p.data("target")?d(p.data("target")):d(".panel").eq(0);var l,g;var j={delay:300};var i=d.extend({},j,q);if(p.find(".panel-overlay").length){o=d(".panel-overlay")}else{p.append(o)}if(!p.hasClass("panel-viewport")){p=d(".panel-viewport")}p.on("touchstart.IUI-panel click.IUI-panel",".panel-open",function(r){r.preventDefault();h(d(this))});p.on("touchstart.IUI-panel click.IUI-panel",".panel-overlay",function(r){r.preventDefault();m()});p.on(IUI_UTILS.transitionEnd,function(r){r.preventDefault();if(!p.hasClass("panel-move")){n.addClass("hide")}});function h(r){var s=r;l="panel-"+s.attr("data-direction");g=d("."+l);o.removeClass("hide");p.addClass(l+" panel-move");n.removeClass("hide")}function m(){p.removeClass("panel-left panel-move");o.addClass("hide")}}});function b(g,m){var j=g,h,k=this;function l(i){if(i.target!==this){return}m.call(this,i);for(h=0;h<j.length;h++){k.off(j[h],l)}}if(m){for(h=0;h<j.length;h++){k.on(j[h],l)}}}d.fn.animationEnd=function(g){b.call(this,["webkitAnimationEnd","animationend"],g);return this};d.fn.transitionEnd=function(g){b.call(this,["webkitTransitionEnd","transitionend"],g);return this};d.fn.IUI({mPicker:function(w){var k={display:"bottom",shadow:false,level:1,rows:4,Linkage:false,dataJson:"",height:36,idDefault:false,splitStr:" ",isshort:false,header:'<div class="mPicker-header"></div>',footer:'<div class="mPicker-footer"><a href="javascript:;" class="mPicker-confirm">确定</a><a href="javascript:;" class="mPicker-cancel">取消</a></div>',confirm:function(){},cancel:function(){}};var u=this;u.$container=d(this);u.$container.data("mPicker",u);u.options=d.extend({},k,w);var q=["100%","50%"];var m=d("body");m.on("touchmove",function(x){if(u.lock){x.preventDefault();x.stopPropagation()}});m.on({touchstart:function(x){x.preventDefault();u.lock=1},touchmove:function(x){x.preventDefault();clearTimeout(u.timeTouchend);u.timeTouchend=setTimeout(function(){u.lock=0},100)},touchend:function(x){x.preventDefault();u.lock=0}},".mPicker-main");u.$container.on("click",function(x){x.preventDefault();x.stopPropagation();u.render();u.$container.focus();u.$container.blur();u.$mPicker.removeClass("hide");u.$mask.removeClass("hide");clearTimeout(m.data("mPicker-timer"));m.data("mPicker-timer",setTimeout(function(){u.$main.removeClass("down")},10));if(!u.noFirst&&u.options.idDefault){p()}var y=[];u.$list.each(function(A,B){l(u.$container,0);var z=u.$container.data("id"+(A+1))?u.$container.data("id"+(A+1)):0;y.push(z)});t(y);u.event()});u.render=function(){var y;var B=[];var z;u.$container.data("middleRowIndex",parseInt(u.options.rows/2.5));if(d(".mPicker").length===0){m.append('<div class="mPicker hide"><div class="mPicker-mask hide"></div>')}u.$mPicker=m.find(".mPicker");u.disy=u.options.display==="bottom"?"mPicker-bottom down":"mPicker-modal";B.push(u.options.dataJson);if(u.options.level===2){var x=i(u.options.dataJson[0]);B.push(x)}y=v(B);z='<div class="mPicker-main '+u.disy+'" data-pickerId="'+u.pickerId+'">'+u.options.header+'<div class="mPicker-content">'+y+'</div><div class="mPicker-shadow"></div>'+u.options.footer+"</div>";u.$mPicker.append(z);u.$mask=d(".mPicker-mask");u.$main=u.$mPicker.find(".mPicker-main");u.$content=u.$main.find(".mPicker-content");u.$list=u.$main.find(".mPicker-list");u.$listul=u.$list.find("ul");if(u.options.level>1){u.$list.width(q[u.options.level-1])}u.$itemOne=u.$listul.eq(0);if(u.options.level===2){u.$itemTwo=u.$listul.eq(1)}u.$list.append('<div class="mPicker-active-box"></div>');u.$list.find(".mPicker-active-box").height(u.options.height);var A=u.options.rows%2===0?-u.options.height-2+"px":-u.options.height*0.5-2+"px";u.$content.find(".mPicker-active-box").css({"margin-top":A});u.$content.height(u.options.height*u.options.rows);u.$list.height(u.options.height*u.options.rows)};u.event=function(){u.$main.find(".mPicker-confirm").on("touchstart.confirm click.confirm",function(A){A.preventDefault();var B="";u.noFirst=true;d.each(u.$listul,function(D,F){var C=d(F).find(".active");var E=D===0?"":u.options.splitStr;if(C.length>0){D=D+1;u.$container.data("value"+D,C.data("value"));u.$container.data("id"+D,C.data("id"));B+=E+C.text()}});u.$container.val(B);u.deffered.hide(u.options.confirm)});u.$main.find(".mPicker-cancel").on("touchstart.cancel click.cancel",function(A){A.preventDefault();u.deffered.hide(u.options.cancel)});u.$mask.off("touchstart.mask click.mask").on("touchstart.mask click.mask",function(A){A.preventDefault();if(u.options.shadow){u.deffered.hide(u.options.cancel)}});var y;var x;var z;u.$list.on("touchstart.list",function(A){n(A);var C=d(this).find("ul");var B=s(C);y=A.touches[0].pageY-B;r(0,C)});u.$list.on("touchmove.list",function(D){D.preventDefault();n(D);var F;var E=d(this).find("ul");var B=E.height();var G=u.options.height*u.options.rows;var A=G-B-parseInt(u.options.rows/2)*u.options.height;var C=u.$container.data("middleRowIndex")*u.options.height;x=D.touches[0].pageY;z=x-y;F=Math.round(z);F=F>C?C:F;F=F<A?A:F;l(E,F);clearTimeout(u.timeTouchend);u.timeTouchend=setTimeout(function(){h(E)},100)});u.$list.on("touchend.list",function(A){A.preventDefault();var B=d(this).find("ul");h(B)})};function h(A){clearTimeout(u.timeTouchend);var y=o(A);var x=y.target.data("id");var z=u.$listul.index(A);if(u.options.Linkage&&z===0){g(x)}r(400,A)}function p(){var A=u.$container.val().split(u.options.splitStr);var z=[];var y=[];var B;var x;var C=function(E,D){d.each(E,function(F,G){if(G.name==A[D]){z[D]=F;y[D]=G.value;u.$container.data("value"+(D+1),y[D]);u.$container.data("id"+(D+1),z[D]);return false}})};if(typeof(A)!=="object"||!A.length||!u.$main){return}C(u.options.dataJson,0);B=u.options.Linkage?u.options.dataJson[z[0]]:u.options.dataJson[0];if(u.options.Linkage&&u.options.level===2&&z[0]&&A.length>1){x=1}if(!u.options.Linkage&&u.options.level===2&&A.length>1){x=1}if(x){B=i(B);C(B,1)}}function o(B,C){var x;var D=Math.round((s(B)/u.options.height));var z=typeof(C)==="number"?B.find("li").index(B.find('li[data-id="'+C+'"]')):u.$container.data("middleRowIndex")-D;var A=-u.options.height*(z-u.$container.data("middleRowIndex"));l(B,A);B.find("li").eq(z).addClass("active").siblings("li").removeClass("active");x={target:B.find("li").eq(z),index:z};return x}function g(x){var y=i(u.options.dataJson[x]);if(u.options.level===2){var z=j(y);u.$itemTwo.html(z);o(u.$itemTwo,0)}}function t(x){var z=x[0]?x[0]:0;var y=x[1]?x[1]:0;if(u.options.Linkage){g(z)}o(u.$itemOne,z);if(u.options.level===2){o(u.$itemTwo,y)}}function i(y){if(!y){return[]}var x=({}).hasOwnProperty.call(y,"child")?y.child:[];return x}function j(x){var y="";d.each(x,function(A,B){var z=u.options.isshort?B.shortName:B.name;y+='<li data-value="'+B.value+'" data-id="'+A+'">'+z+"</li>"});return y}function v(A){var z="";for(var y=0;y<A.length;y++){var x=j(A[y]);z+='<div class="mPicker-list"><ul>'+x+"</ul></div>"}return z}function r(y,x){x.css({"-webkit-transition-duration":y+"ms","transition-duration":y+"ms"})}function n(x){if(!x.touches){x.touches=x.originalEvent.touches}}function l(x,z){x.css({"-webkit-transform":"translateY("+z+"px)",transform:"translateY("+z+"px)"})}function s(z){var y=/\.*translateY\((.*)px\)/i;var x;if(z[0].style.WebkitTransform){x=parseInt(y.exec(z[0].style.WebkitTransform)[1])}else{if(z[0].style.transform){x=parseInt(y.exec(z[0].style.transforms)[1])}}return x}u.deffered={container:u.$container,show:function(){u.$container.trigger("touchstart")},hide:function(x){u.$mask.addClass("hide");if(u.options.display==="bottom"){u.$main.addClass("down").transitionEnd(function(){u.$mPicker.addClass("hide");u.$main.remove();if(typeof(x)==="function"){x.call(this)}});return false}u.$mPicker.addClass("hide");u.$main.remove();if(typeof(x)==="function"){x.call(this)}},updateData:function(y){if(!y.length){return}u.noFirst=false;for(var x=0;x<u.options.level;x++){u.$container.data("id"+(x+1),0);u.$container.data("value"+(x+1),"")}u.options.dataJson=y;u.$main.remove()}};return u.deffered}})}(jQuery,window,document,undefined));